---
title: "06.Lifecycle Hook, useEffect"
excerpt: "react"

categories:
  - react

toc: true
toc_sticky: true
---

---

## ì»´í¬ë„ŒíŠ¸ì˜ Lifecycle & Hook

ì»´í¬ë„ŒíŠ¸ëŠ” Lifecycleì´ë¼ëŠ” ê°œë…ì´ ìˆìŠµë‹ˆë‹¤.

ì»´í¬ë„ŒíŠ¸ë„ ì¸ìƒì´ ìˆë‹¤ëŠ”ê²ë‹ˆë‹¤.

ì»´í¬ë„ŒíŠ¸ëŠ” 1. ìƒì„±ì´ ë  ìˆ˜ë„ ìˆê³  2. ì‚­ì œê°€ ë  ìˆ˜ ìˆê³  3. ê´€ë ¨ëœ stateê°€ ë³€ê²½ë˜ë©´ ì¬ë Œë”ë§(ì—…ë°ì´íŠ¸)ê°€ ì¼ì–´ë‚  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.


- ì»´í¬ë„ŒíŠ¸ì˜ ì¸ìƒ ì¤‘ê°„ì¤‘ê°„ Hookì„ ê±¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Hook ì„ ì´ìš©í•´ì„œ ì¤‘ê°„ì¤‘ê°„ ì°¸ê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, 

"Detail ì»´í¬ë„ŒíŠ¸ ë“±ì¥ ì „ì— ì´ê²ƒì¢€ í•´ì¤˜"

"Detail ì»´í¬ë„ŒíŠ¸ ì‚¬ë¼ì§€ê¸° ì „ì— ì´ê²ƒì¢€ í•´ì¤˜"

"Detail ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸ ë˜ê³ ë‚˜ì„œ ì´ê²ƒì¢€ í•´ì¤˜"

Hookì„ ì‚¬ìš©í•˜ë©´ ì´ëŸ° ì½”ë“œë¥¼ ì§¤ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ì§€ìš”.

Hookì˜ ì •í™•í•œ ëª…ì¹­ì€ Lifecycle Hook ì´ë¼ê³  í•©ë‹ˆë‹¤.


## Lifecycle Hookì€ ì–´ë–»ê²Œ ìƒê²¼ëŠ”ê°€?

```js
class Detail2 extends React.Component {
  componentDidMount(){
    //Detail2 ì»´í¬ë„ŒíŠ¸ê°€ Mount ë˜ê³ ë‚˜ì„œ ì‹¤í–‰í•  ì½”ë“œ
  }
  componentWillUnmount(){
    //Detail2 ì»´í¬ë„ŒíŠ¸ê°€ Unmount ë˜ê¸°ì „ì— ì‹¤í–‰í•  ì½”ë“œ
  }
}
```

class component  ì‘ì„±í•˜ëŠ” ê³³ ì•ˆì— ë„£ìœ¼ë©´ ë˜ëŠ”ë° ê°€ì¥ ìœ ìš©í•œ Hook ë‘ê°œëŠ”

- componentDidMount() : component ì²« ë“±ì¥ í›„ ì‹¤í–‰ í•  ì½”ë“œ

- componentWillUnmount(): ë‹¤ë¥¸í˜ì´ì§€ë¡œ ë„˜ì–´ê°„ë‹¤ë“ ì§€ ë“±ì˜ ì‚¬ìœ ë¡œ ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§€ê¸° ì „ ì‹¤í–‰í•  ì½”ë“œ


## function ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” useEffect í›…

ìš”ì¦˜ react ê°œë°œì—ì„  useEffect ë¥¼ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤. (ì§§ê³  ë” ì‰¬ì›€)

function component ì•ˆì— ë„£ì–´ ì£¼ë©´ ë©ë‹ˆë‹¤. (return ë‚˜ì˜¤ê¸° ì „)


```js
import React, {useState, useEffect} from 'react';

function Detail(){

  useEffect(()=>{
    //ì½”ë“œë¥¼ ì ìŠµë‹ˆë‹¤ ì—¬ê¸°
  });
  
  return (
    <HTML ì½”ë“œ/>
  )
}
```

1.ê·¼ë° ë¯¸ë¦¬ í˜ì´ì§€ ìƒë‹¨ì—ì„œ useEffectë¥¼ import í•´ì˜¤ì‹  í›„

2.useEffect() ë¥¼ ì‚¬ìš©í•˜ì…”ì•¼í•©ë‹ˆë‹¤.

3.ê·¸ë¦¬ê³  ì•ˆì— ì½œë°±í•¨ìˆ˜ë¥¼ ì§‘ì–´ë„£ìŠµë‹ˆë‹¤.

4.ì½œë°±í•¨ìˆ˜ ì•ˆì—ëŠ” **Detail ì»´í¬ë„ŒíŠ¸ê°€ ì²« ë“±ì¥í•˜ê³ ë‚˜ì„œ ì‹¤í–‰í•˜ê³ ì‹¶ì€ ì½”ë“œ**ê°€ ìˆìœ¼ë©´ ì ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.


ì¡°ê¸ˆ ë” ìì„¸í•˜ê²Œ ì•Œì•„ë³´ëŠ”... useEffect() ë‚´ì˜ ì½”ë“œì˜ ì‹¤í–‰ì¡°ê±´ì€

- ì»´í¬ë„ŒíŠ¸ê°€ ì²« ë“±ì¥í•´ì„œ ë¡œë”©ì´ ëë‚œ í›„ì— ( mount ëë‚¬ì„ ë•Œ)

- ì»´í¬ë„ŒíŠ¸ê°€ ì¬ë Œë”ë§ ë˜ê³ ë‚œ í›„ ë•Œ ( update ë˜ê³ ë‚œ í›„ì—)

ì…ë‹ˆë‹¤.


## component ê°€ ì‚¬ë¼ì§ˆ ë•Œ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê¸° (useEffect)


```js
import React, {useState, useEffect} from 'react';

function Detail(){

  useEffect(()=>{
   
    return function í•¨ìˆ˜ëª…(){ ì‹¤í–‰í•  ì½”ë“œ } 
  });
  
  return (
    <HTML ì½”ë“œ/>
  )
}
```

useEffect() ì•ˆì—ëŠ” returnì´ë¼ëŠ”ê±¸ ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³  **ì—¬ê¸° ë„£ì€ í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œ ì‹¤í–‰**ë©ë‹ˆë‹¤.

- ë‹¹ì—°íˆ ë‹¤ë¥¸ ê³³ì—ì„œ ë§Œë“¤ì–´ ë†“ì€ í•¨ìˆ˜ëª…ì„ ì…ë ¥í•˜ì…”ë„ ë©ë‹ˆë‹¤.

- arrow function ì§‘ì–´ë„£ìœ¼ì…”ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.


## useEffect ì—¬ëŸ¬ê°œ ì‚¬ìš©í•˜ê¸°

```jsã…
import React, {useState, useEffect} from 'react';

function Detail(){

  useEffect(()=>{
    //1ë²ˆì§¸ ì‹¤í–‰ ì½”ë“œ
  });
  useEffect(()=>{
    //2ë²ˆì§¸ ì‹¤í–‰ ì½”ë“œ
  });
  
  return (
    <HTMLë§ì€ê³³/>
  )
}
```
- ì­‰ ì ìœ¼ë©´ ìœ„ì—ë¶€í„° ìˆœì„œëŒ€ë¡œ useEffect() ê°€ ì‹¤í–‰ ë©ë‹ˆë‹¤


## ì‘ìš© ! useEffect() ë¥¼ ì‚¬ìš©í•˜ì—¬ alert ì°½ ì‚¬ë¼ì§€ê²Œ í•˜ê¸°


- UI ë§Œë“¤ê¸°

    - UI ë³´ì´ê³  ì•ˆë³´ì´ê³ ì˜ ìƒíƒœë¥¼ state ë¡œ ì €ì¥í•´ë‘  (true / false ì´ëŸ°ê±¸ë¡œ)

    - state ê°€ true ì¼ë•Œë§Œ UI ë¥¼ ë³´ì—¬ì£¼ëŠ” if ë¬¸ ì‘ì„±


```js
// UI ë§Œë“¤ê¸°

function Detail() { 
  
  let [ alert, alertEdit ] = useState(true); 
  
  useEffect(() => { 
    let Timer = setTimeout(() => { alertEdit(false)}, 2000)
  }); 
  return (

    { // ì‚¼í•­ì—°ì‚°ì ì‚¬ìš© 
      alert === true 
      ? (<div className="my-alert2"> 
          <p>ì¬ê³ ê°€ ì–¼ë§ˆ ë‚¨ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</p> 
      </div>) 
     : null 
    }
  ) 
} 
```

- í•­ìƒ ë³´ì´ëŠ” UI ê°€ ì•„ë‹ˆë¼ë©´, (ëª¨ë‹¬ì°½, alert ì°½, ë“±) ì¼ì‹œì ìœ¼ë¡œ ë³´ì˜€ë‹¤ê°€ ì‚¬ë¼ì§€ê±°ë‚˜ ë‚˜íƒ€ë‚˜ëŠ” ì°½ì„ ë§Œë“¤ë•Œ react ì—ì„œëŠ” ìœ„ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.


- ê·¼ë° Detail component ê°€ ì—…ë°ì´íŠ¸ ë ë•Œë„ ì„¤ì •í•œ useEffect ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤

- useEffect()ëŠ” ì»´í¬ë„ŒíŠ¸ ë“±ì¥ & ì—…ë°ì´íŠ¸ê°€ ë˜ê³ ë‚˜ì„œ í•­ìƒ ì‹¤í–‰ë©ë‹ˆë‹¤.

- component ê°€ ì—…ë°ì´íŠ¸ ë ë•Œ ë§ˆë‹¤ useEffect() ê°€ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ë‚˜ì¤‘ì— bug ê°€ ìì£¼ ë°œìƒí•¨..

ê·¸ë˜ì„œ ì—…ë°ì´íŠ¸ë ë•ŒëŠ” useEffect() ë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šê²Œ ì„¤ì •ì„ í•´ì•¼ í•©ë‹ˆë‹¤.

----

```js
useEffect(()=>{
   let timer = setTimeout(()=>{ alertEdit(false) }, 2000);
}, [ alert ]);
```

- ìœ„ì™€ ê°™ì´ ëë¶€ë¶„ì— alert ë¼ëŠ” ì´ë¦„ì˜ state ê°€ ë³€ê²½ë ë•Œë§Œ `useEffect()` ê°€ ì‹¤í–‰ ë˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì¼ì¢…ì˜ ì‹¤í–‰ì¡°ê±´ì¸ë° 1. Detail component ê°€ ë¡œë“œê°€ ë ë•Œ && 2. alert ì´ë¼ëŠ” state ê°€ ë³€ê²½ì´ ë ë•Œë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤. 


----

```js
useEffect(()=>{
   let timer = setTimeout(()=>{ alertEdit(false) }, 2000);
}, []); // ë¹ˆ [] ë§Œìˆê²Œ ë˜ë©´ ë‹¨ 1íšŒì„±ìœ¼ë¡œ ë§Œ ì‹¤í–‰í•¨
```
- ìœ„ì—ëŠ” ì¡°ê±´ì„ ì•ˆë„£ì€ ê²ë‹ˆë‹¤. ê·¸ëŸ¼ ì´ì œ ì´ useEffect() ì½”ë“œëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ ë  ë•Œ ì ˆëŒ€ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ê·¸ëƒ¥ ì»´í¬ë„ŒíŠ¸ ë¡œë“œë•Œë§Œ í•œë²ˆ ë”± ì‹¤í–‰í•˜ê³  ì‹¶ì€ ì½”ë“œë¥¼ ë‹´ì„ ë•Œ ì“¸ ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.



### setTimer í•´ì œ

- setTimer() ë¥¼ ì‚¬ìš©í• ë•Œ component ê°€ ì‚¬ë¼ì§ˆë•Œ íƒ€ì´í„°ë¥¼ ì—†ì• ëŠ” ì½”ë“œë„ ì¶”ê°€í•´ì£¼ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤. (ë‚˜ì¤‘ì— íƒ€ì´ë¨¸ ë•Œë¬¸ì— ë‹¤ë¥¸ê³³ì—ì„œ ë¬¸ì œê°€ ë°œìƒë˜ëŠ”ê²ƒì„ ë°©ì§€!!)

```js
useEffect(()=>{
   let timer = setTimeout(()=>{ alertEdit(false) }, 2000);
   return () => {clearTimeout(timer)}
}, []); 
```




ğŸ”¶ ğŸ”·  ğŸ“Œ ğŸ”‘

## Reference

- react official page- [https://reactjs.org/docs/hooks-effect.html](https://reactjs.org/docs/hooks-effect.html){:target="\_blank"}


- coding apple - [https://online.codingapple.com/course/react-basic/](https://online.codingapple.com/course/react-basic/){:target="\_blank"}

