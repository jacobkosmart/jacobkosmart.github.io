---
title: "Flutter 2.0 with null safety"
excerpt: "flutter"

categories:
  - flutter

toc: true
toc_sticky: true
---

## 1.ScaffoldMessenger class

- Manages SnackBars for descendant Scaffolds

- By default, a root ScaffoldMessenger is included in the MaterialApp. : route ê°€ ë°”ë€Œì–´ë„ ì–¸ì œë“ ì§€ snackBar ë¥¼ í˜¸ì¶œí•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤

- The ScaffoldMessenger now handles SnackBars in order to persist across routes and always be displayed on the current Scaffold. : ìµœìƒì˜ root ì—ì„œ ê´€ë¦¬ ë˜ê¸°ë•Œë¬¸ì— ì–¸ì œë“ ì§€ í˜„ìž¬ Scaffold ì—ì„œ ê°€ì ¸ë‹¤ê°€ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤ëŠ” ê²ƒìž…ë‹ˆë‹¤.

- flutter 2.0 ë¶€í„° ì§€ì›ë˜ëŠ” `ScaffoldMessenger class` ëŠ” ì—¬ëŸ¬ê°€ì§€ í©ì–´ì ¸ ìžˆëŠ” scaffold ì— ê° `snackBar` ë¥¼ ì†ì‰½ê²Œ ì „ë‹¬í•´ ì¤„ ìˆ˜ ìžˆëŠ” widget ìž…ë‹ˆë‹¤.

```dart
// in main.dart

void main() => runApp(MyApp());

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      title: 'AppBar',
      theme: ThemeData(primaryColor: Colors.lightBlue),
      // ì´ˆê¸° í™”ë©´ì˜ ê²½ë¡œë¥¼ í‘œì‹œí•´ì¤Œ
      initialRoute: '/',
      // named routes ë¥¼ map í˜•ì‹ìœ¼ë¡œ ì•„ëž˜ì™€ ê°™ì´ ê²½ë¡œë¥¼ ì§€ì •í•´ ì¤€ë‹¤
      routes: {
        '/': (context) => ScreenA(),
        '/b': (context) => ScreenB(),
        '/c': (context) => ScreenC(),
      },
    );
  }
}
```

```dart
// in screen_a.dart

class ScreenA extends StatelessWidget {
  const ScreenA({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('ScreenA'),
      ),
      body: Center(
        child: ElevatedButton(
          child: Text('Go to the Second Page'),
          onPressed: () {
            Navigator.push(
              context,
              MaterialPageRoute(builder: (context) => ScreenB()),
            );
          },
        ),
      ),
      floatingActionButton: FloatingActionButton(
        child: Icon(Icons.thumb_up),
        onPressed: () {
          // scaffoldMessenger ë¥¼ í†µí•´ ë‹¤ë¥¸ íŽ˜ì´ì§€ë¡œ ì´ë™ì„ í•˜ë”ë¼ë„ 5ì´ˆë™ì•ˆ ê³„ì† snackBar ê°€ ë‚˜íƒ€ë‚˜ê²Œ ë©ë‹ˆë‹¤ => ì™œëƒí•˜ë©´ ëª¨ë“  ìžì† scaffold ê°€ ë“±ë¡ì´ ë˜ì–´ìžˆê¸° ë•Œë¬¸ì— snackBar ë¥¼ ê³µìœ í•´ì„œ ê³„ì† ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text('ì¢‹ì•„ìš”ê°€ ì¶”ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤'),
              duration: Duration(seconds: 5),
              action: SnackBarAction(
                label: 'Undo',
                onPressed: () {
                  Navigator.pushNamed(context, '/c');
                },
              ),
            ),
          );
        },
      ),
    );
  }
}
```

```dart
// in screen_b.dart

class ScreenB extends StatelessWidget {
  const ScreenB({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('ScreenB'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text(
              '"ì¢‹ì•„ìš”ê°€ ì¶”ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤',
              style: TextStyle(
                fontSize: 20.0,
                color: Colors.blue,
              ),
            ),
            SizedBox(
              height: 40.0,
            ),
            ElevatedButton(
              onPressed: () {
                Navigator.pop(context);
              },
              child: Text('Home ìœ¼ë¡œ ì´ë™'),
            ),
          ],
        ),
      ),
    );
  }
}
```

```dart
// in screen_c.dart

class ScreenC extends StatelessWidget {
  const ScreenC({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    // 2.0 ì´ì „ë°©ì‹ìœ¼ë¡œ ë‹¨ë…ìœ¼ë¡œ snakBar ì‚¬ìš©í•  ê²½ìš° ê°œë³„ì ì¸ Scaffold ì—ì„œ ScaffoldMessenger ë¥¼ ì‚¬ìš©í•´ì„œ Builder ë¥¼ ë§Œë“¤ì–´ì„œ ê°œë³„ ì ìš©í•´ì£¼ë©´ ë¨
    return ScaffoldMessenger(
      child: Scaffold(
        appBar: AppBar(
          title: Text('ScreenC'),
        ),
        body: Builder(builder: (context) {
          return Center(
            child: Column(
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                Text(
                  'ì¢‹ì•„ìš”ë¥¼ ì·¨ì†Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
                  style: TextStyle(fontSize: 24.0),
                ),
                SizedBox(
                  height: 50.0,
                ),
                ElevatedButton(
                  onPressed: () {
                    ScaffoldMessenger.of(context).showSnackBar(
                      SnackBar(
                        content: Text('"ì¢‹ì•„ìš”" ê°€ ì·¨ì†Œ ë˜ì—ˆìŠµë‹ˆë‹¤.'),
                        duration: Duration(seconds: 3),
                        action: SnackBarAction(
                          label: "Homeìœ¼ë¡œ ì´ë™",
                          onPressed: () {
                            Navigator.pop(context);
                          },
                        ),
                      ),
                    );
                  },
                  child: Text('ì·¨ì†Œ í•˜ê¸°'),
                ),
                SizedBox(
                  height: 50.0,
                ),
                ElevatedButton(
                    onPressed: () {
                      Navigator.pop(context);
                    },
                    child: Text('Homeìœ¼ë¡œ ê°€ê¸°'))
              ],
            ),
          );
        }),
      ),
    );
  }
}
```

![Kapture 2021-10-14 at 17 07 40](https://user-images.githubusercontent.com/28912774/137277141-d932eb24-71c3-4f51-8f01-496ba812bc9e.gif)

## 2.Buttons (TextButton, ElevatedButton, OutlinedButton)

- 2.0 ì—ì„œ ìƒˆë¡œ ì¶”ê°€, ë³€ê²½ëœ button ì˜ ì†ì„± ë° icon ê³¼ ê°™ì´ ì‚¬ìš©ë˜ëŠ” button ë“¤ì€ ì•„ëž˜ì˜ ì½”ë“œì™€ ê°™ìŠµë‹ˆë‹¤.

```dart
class ScreenA extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Buttons'),
        centerTitle: true,
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            // Text button
            TextButton(
              onPressed: () {
                print('text button');
              },
              // ê¸¸ê²Œ ëˆŒë €ì„ë•Œ ì‹¤í–‰í•  í•¨ìˆ˜
              onLongPress: () {
                print('text button');
              },
              child: Text(
                'Text button',
                style: TextStyle(fontSize: 20.0),
              ),
              // TextButton ì˜ ìŠ¤íƒ€ì¼
              style: TextButton.styleFrom(
                primary: Colors.red,
                //backgroundColor: Colors.blue
              ),
            ),

            // ElevatedButton
            ElevatedButton(
              onPressed: () {
                print('Elevated button');
              },
              child: Text('Elevated button'),
              style: ElevatedButton.styleFrom(
                  primary: Colors.orangeAccent,
                  shape: RoundedRectangleBorder(
                      borderRadius: BorderRadius.circular(10.0)),
                  elevation: 0.0),
            ),

            // OutlinedButton
            OutlinedButton(
              onPressed: () {
                print('Outlined button');
              },
              child: Text('Outlined button'),
              style: OutlinedButton.styleFrom(
                primary: Colors.green,
                // side: ì—ì„œ Border line ì„ ì„¤ì • í•  ìˆ˜ ìžˆìŒ
                side: BorderSide(color: Colors.black87, width: 2.0),
              ),
            ),

            // TextButton with icon
            TextButton.icon(
              onPressed: () {
                print('Icon button');
              },
              // ë§Œì•½ icon ì˜ ìƒ‰ì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ Primary ìƒ‰ìœ¼ë¡œ ì„¤ì •ë¨
              icon: Icon(
                Icons.home,
                size: 30.0,
                color: Colors.black87,
              ),
              label: Text('Go to home'),
              style: TextButton.styleFrom(
                primary: Colors.purple,
              ),
            ),

            // ElevatedButton with icon
            ElevatedButton.icon(
              onPressed: () {
                print('Go to Home');
              },
              icon: Icon(
                Icons.home,
                size: 20,
              ),
              label: Text('Go to Home'),
              style: ElevatedButton.styleFrom(
                  primary: Colors.black, minimumSize: Size(200, 50)),
            ),

            // OutlinedButton with icon
            OutlinedButton.icon(
              onPressed: () {
                print('Outlined icon button');
              },
              icon: Icon(Icons.home),
              label: Text('Go to home'),
              style: OutlinedButton.styleFrom(
                primary: Colors.black,
              ),
            ),

            // ElevatedButton with icon
            ElevatedButton.icon(
              onPressed: null,
              icon: Icon(
                Icons.home,
                size: 20,
              ),
              label: Text('Go to Home'),
              style: ElevatedButton.styleFrom(
                primary: Colors.black,
                onSurface: Colors.pink,
                minimumSize: Size(200, 50),
              ),
            ),

            // ButtonBar
            // An end-aligned row of buttons, laying out into a column if there is not enough horizontal space.
            ButtonBar(
              alignment: MainAxisAlignment.end,
              buttonPadding: EdgeInsets.all(20),
              children: [
                TextButton(
                  onPressed: () {},
                  child: Text("TextButton"),
                ),
                ElevatedButton(
                  onPressed: () {},
                  child: Text("ElevatedButton"),
                ),
              ],
            )
          ],
        ),
      ),
    );
  }
}

```

![image](https://user-images.githubusercontent.com/28912774/137281110-647ce2a3-47ae-4fd1-8705-9f630caa31e1.png)

- buttonBar ì˜ ì‚¬ìš© ì˜ˆì‹œ

![image](https://user-images.githubusercontent.com/28912774/137281504-e02dd06f-6d24-420c-bbd6-bd54088a2e41.png)

## 3.Null safety

- Null : ì•„ì§ ê°’ì´ ì •í•´ ì§€ì§€ ì•Šì€ê²ƒì„ ë§í•©ë‹ˆë‹¤.

`int age = 20;` ì™€ ê°™ì´ ë³€ìˆ˜ëŠ” Primitive type (ê¸°ë³¸ íƒ€ìž…) ì„ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤ => Dart ì–¸ì–´ëŠ” type safe language ë¡œ typeì„ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤

`int age = null;` ì½”ë“œì˜ type ì€ `int or null` type ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìžˆëŠ”ë°, ì‹¤ì œ ì´ëŸ¬í•œ type ì€ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤

- ì´ê²ƒì„ ë°©ì§€í•˜ê³ ìž, `Null safety` ê°œë…ì´ ë“±ìž¥í•˜ëŠ”ë°, ë³€ìˆ˜ëŠ” ì ˆëŒ€ `null` ê°’ì„ ê°€ì§ˆ ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒìž…ë‹ˆë‹¤. ì¦‰, ë³€ìˆ˜ë¥¼ ìƒì„±í• ë•Œ null ì´ ìƒì„±ë˜ì§€ ì•Šë„ë¡ default ê°’ìœ¼ë¡œ ì„¤ì •í•´ ë†“ëŠ” ê²ƒìž…ë‹ˆë‹¤. ê·¸ëž˜ì„œ `int age = null` ì„ ë”ì´ìƒ í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤. (compile ë‹¨ê³„ì—ì„œ ì•ˆë˜ê²Œ ë¨)

### Null safety íŠ¹ì§•

#### 1.ëª¨ë“  ë³€ìˆ˜ëŠ” nullì´ ë  ìˆ˜ ì—†ìœ¼ë©°, non-nullable ë³€ìˆ˜ì—ëŠ” null ê°’ì„ í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤

#### 2.non-nullable ë³€ìˆ˜ë¥¼ ìœ„í•œ null check ê°€ í•„ìš”ì—†ìŠµë‹ˆë‹¤

#### 3. "Class ë‚´ì˜ ë³€ìˆ˜ëŠ”" ë°˜ë“œì‹œ ì„ ì–¸ê³¼ ë™ì‹œì— ì´ˆê¸°í™”ë¥¼ ì‹œì¼œì•¼ í•©ë‹ˆë‹¤

```dart
class Person {
  // null safety ì ìš© ì „ì—ëŠ” ì„ ì–¸ë§Œ í•˜ê³  ë³€ìˆ˜ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ì˜€ìœ¼ë‚˜ 2.0 ì´í›„ì—ëŠ” ì‚¬ìš©ì´ ì•ˆëœë‹¤
  int age;

  // null safety ì ìš© ì´í›„
  int age = 30;
}
```

### Null safety ìˆ˜ì •ë°©ë²• Case.1

```dart
// String ì— ë³€ìˆ˜ ì„ ì–¸ë§Œí•˜ê³  value ê°’ì´ ì—†ëŠ” ìƒíƒœ null ì¸ ê²½ìš° ì´ê¸° ë•Œë¬¸ì—, null safety ì ìš© í›„ error ë°œìƒ
class Person {
  // error : Non-nullable instance field 'name' must be initialized.
  String name;

  String nameChange(String name) {
    this.name = name;
    return name.toUpperCase();
  }
}

void main() {
  Person p = Person();
  p.name = 'Jacob';
  print(p.nameChange(p.name));
}
```

```dart
class Person {

  // String or null ì˜ íƒ€ìž…ì„ ì§€ì •
  String? name;

  // String type ì— String or null ìž„
  String nameChange(String? name) {
    this.name = name;
    // type check í•˜ëŠ” null ìž„
    if(name == null) {
      return 'need a name';
    } else {
     return name.toUpperCase();
    }
  }
}

void main() {
  Person p = Person();
  p.name = 'Jacob';
  print(p.nameChange(p.name));
}
```

### Null safety ìˆ˜ì •ë°©ë²• Case.2

```dart
// class ì— age ì„ ì–¸ null => null safety ì „ì—ëŠ” ì •ìƒìž‘ë™í•¨
class Person {
  // ì„ ì–¸ê³¼ ë™ì‹œì— í• ë‹¹ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ë‚˜ì¤‘ì— í• ë‹¹ì´ ë˜ì–´ì ¸ì•¼ í•˜ëŠ” ê²½ìš°ìž„
  int age;

  // constructor ìƒì„±
  int sum(int age, int num) {
    this.age = age;
    int total = age + num;
    return total + age;
  }
}

void main() {
  // instance
  Person p = Person();
  print(p.sum(100, 50));
}
```

```dart
class Person {
  // ë‚˜ì¤‘ì— ì„ ì–¸ í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ë¡œ late initialized ì•žì— late ì„ ë¶™ì´ë©´ null safety ì—ì„œ error ê°€ ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ
  late int age;

  int sum(int age, int num) {
    this.age = age;
    int total = age + num;
    return total + age;
  }
}

void main() {
  Person p = Person();
  print(p.sum(100, 50));
}
```

### Null safety ìˆ˜ì •ë°©ë²• Case.3

```dart
void main() {
  int x = 50;
  int? y;
  if(x > 0) {
    y = x;
  }
  // A value of type "int?" can't be assigned to a variable of type "int" ì—ëŸ¬ ë°œìƒ : nullable type ì¸ y ì—ëŠ” int type ì¸ value ì— í• ë‹¹ í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— error ë°œìƒì‹œí‚´
  int value = y;
  print(value);
}
```

```dart
void main() {
  int x = 50;
  int? y;
  if(x > 0) {
    y = x;
  }
  // nullable ë³€ìˆ˜ y ëŠ” í•­ìƒ non-nullable ê°’ì„ ê°€ì§ˆê²ƒì´ë¼ê³  ì•Œë ¤ì£¼ëŠ” ê²ƒì€ y ë’¤ì— ! (exclamation or bang mark) ë¥¼ ë¶™ì—¬ì„œ ì‹¤í–‰í•˜ë©´ error ê°€ ë°œìƒ ì•ˆë¨ ì¦‰, Not nullable type ì€ ! ë¡œ í‘œì‹œ í•œë‹¤
  int value = y!;
  print(value);
}
```

### Null safety ìˆ˜ì •ë°©ë²• Case.4

```dart
void main() {
  print(add());
}

// named argument ëŠ” optional í•œê±°ê¸° ë•Œë¬¸ì— ìœ„ì— add method ë¥¼ ì¶”ê°€í• ë•Œ ì•„ë¬´ê°’ë„ ì—†ì„ë•Œ error ê°€ ë°œìƒí•˜ì§€ ì•ŠìŒ
// int ë³€ìˆ˜ëŠ” null ê°’ì„ ê°€ì§ˆ ìˆ˜ ì—†ê¸° ë•Œë¬¸ìž„
int add({int a, int b}) {
  int sum = a+ b;
  return sum;
}
```

```dart
void main() {
  print(add(a: 4, b: 5));
}

// named argument ëŠ” optional ì´ê¸° ë•Œë¬¸ì— required ë¥¼ ë¶™ì´ë©´ í•„ìˆ˜ ì ì¸ ê°’ìœ¼ë¡œ ì„ ì–¸ í•  ìˆ˜ ìžˆìŒ
int add({required int a, required int b}) {
  int sum = a+ b;
  return sum;
}
```

> [Null safety codelab](https://dart.dev/codelabs/null-safety)

---

ðŸ”¶ ðŸ”· ðŸ“Œ ðŸ”‘

## Reference

- SnackBars managed by the ScaffoldMessenger - [https://flutter.dev/docs/release/breaking-changes/scaffold-messenger](https://flutter.dev/docs/release/breaking-changes/scaffold-messenger){:target="\_blank"}

- Null safety in Flutter - [https://flutter.dev/docs/null-safety](https://flutter.dev/docs/null-safety){:target="\_blank"}

- ì½”ë”© ì…°í”„ - [https://www.youtube.com/watch?v=0LNUSnmzDg4&list=PLQt_pzi-LLfpx8x6YEMvUwfJHZIEk2L6J&index=1](https://www.youtube.com/watch?v=0LNUSnmzDg4&list=PLQt_pzi-LLfpx8x6YEMvUwfJHZIEk2L6J&index=1){:target="\_blank"}
