---
title: "ì¹´ì¹´ì˜¤í†¡ ë¡œê·¸ì¸ in SwiftUI "
excerpt: "SwiftUI"

categories:
  - swiftui

toc: true
toc_sticky: true
---

## ì¹´ì¹´ì˜¤í†¡ ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°

> Kakao API Docs - https://developers.kakao.com/docs

SNS ë¡œê·¸ì¸ ê¸°ëŠ¥ì¤‘ ìì£¼ ì‚¬ìš©í•˜ëŠ” ì¹´ì¹´ì˜¤ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ì„œ ì‚¬ìš©ìì˜ DB ì •ë³´ë¥¼ ì¹´ì¹´ì˜¤ë¡œë¶€í„° í† í°ê°’ì„ ë°›ì•„ì™€ì„œ SwiftUI ì—ì„œ êµ¬í˜„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤

### 1.í”„ë¡œì íŠ¸ ìƒì„±

ë¨¼ì € Kakao Page ì—ì„œ ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—ì„œ test ìš© ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“­ë‹ˆë‹¤.

ì•„ë˜ì˜ ê·¸ë¦¼ê³¼ ê°™ì´ ì•±í‚¤ ê°€ ë°œê¸‰ë˜ëŠ”ë° ì—¬ê¸°ì„œ ì‚¬ìš©ë˜ëŠ”ê²ƒì´ ë„¤ì´í‹°ë¸Œ ì•±í‚¤ ì…ë‹ˆë‹¤

<img width="1645" alt="image" src="https://user-images.githubusercontent.com/28912774/182251090-bbad27b7-0d6a-4ec0-bc07-6e3a9d36212b.png">

ê·¸ë¦¬ê³  iOS í”Œë«í¼ì„ ë“±ë¡ ì‹œì¼œì¤˜ì•¼ í•˜ëŠ”ë° ì—¬ê¸°ì„œ í•„ìš”í•œ ê²ƒì´ bundleID ì…ë‹ˆë‹¤ (ì•±ì˜ ì£¼ì†Œë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤)

<img width="1396" alt="image" src="https://user-images.githubusercontent.com/28912774/182252715-82d10f47-6208-4666-935a-3ba8c442b091.png">

### 2.iOS SDK ì¹´ì¹´ì˜¤í†¡ ì„¤ì¹˜ (SPM)

> https://developers.kakao.com/docs/latest/ko/getting-started/sdk-ios#apply-sdk-spm

<img width="810" alt="image" src="https://user-images.githubusercontent.com/28912774/182253162-075e0038-e0e7-4f87-a828-5b97ad30c539.png">

#### ì•±ë‚´ì—ì„œ ì„¤ì •í•´ì£¼ê¸°

<img width="849" alt="image" src="https://user-images.githubusercontent.com/28912774/182253448-ab6e8c7f-7c52-4895-977b-8ac919adf41a.png">

info.plist íŒŒì¼ì—ì„œ ì»¤ìŠ¤í…€ url ìŠ¤í‚´ì„ ë„£ì–´ì¤˜ì•¼ í•©ë‹ˆë‹¤

```bash
 <key>LSApplicationQueriesSchemes</key>
  <array>
      <!-- ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ë¡œê·¸ì¸ -->
      <string>kakaokompassauth</string>
      <!-- ì¹´ì¹´ì˜¤í†¡ ê³µìœ  -->
      <string>kakaolink</string>
  </array>
```

- URL Schemes ì„¤ì •í•˜ê¸°

<img width="860" alt="image" src="https://user-images.githubusercontent.com/28912774/182253881-300153d5-e945-44c5-b7d9-7f47046bfef7.png">

ë„¤ì´í‹°ë¸Œ ì•±í‚¤ë¥¼ ë„£ì–´ì£¼ë©´ ë˜ëŠ”ë°, ì´ í‚¤ê°™ì€ ê²½ìš°ì—ëŠ” ì†ŒìŠ¤ì½”ë“œë¥¼ ê³µìœ ì‹œ ê³µìœ ê°€ ì•ˆë˜ë„ë¡ í•˜ëŠ”ê²ƒì´ ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì—, ë³´ì•ˆì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤

`command + n` ìƒˆíŒŒì¼ ìƒì„±ì—ì„œ ê²€ìƒ‰ ì°½ì— config ì¹˜ë©´ `Configuration Setting File` ì„ ìƒì„±í•´ì¤ë‹ˆë‹¤

<img width="1420" alt="image" src="https://user-images.githubusercontent.com/28912774/182254664-8141a7b9-e6d9-4012-9afd-afc0319bd5bc.png">

<img width="1139" alt="image" src="https://user-images.githubusercontent.com/28912774/182254698-da93c4ba-da98-441f-9a05-0518da08547b.png">

ê·¸ë‹¤ìŒì—”, info.plist ì—ì„œ KAKAO_NATIVE_APP_KEY ê°’ì„ ë“±ë¡ í•´ì¤ë‹ˆë‹¤

<img width="1417" alt="image" src="https://user-images.githubusercontent.com/28912774/182254885-b416bc67-efad-483e-b153-0f5add4663e4.png">

ì´ë ‡ê²Œ í•˜ë©´ KAKAO_NATIVE_APP_KEY ì„ ë©”ì¸ bundle ë¡œì¨ ê°€ì ¸ ì˜¬ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤

- ì¶”ê°€ë¡œ App Project ë‚´ì—ì„œ ìƒì„±ëœ Config íŒŒì¼ì„ ì‚¬ìš©í•  ìˆ˜ ì‡ë„ë¡ Debug, Release í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì—°ê²° ì‹œì¼œ ì¤˜ì•¼ í•©ë‹ˆë‹¤

<img width="1611" alt="image" src="https://user-images.githubusercontent.com/28912774/182272611-0aa85ca6-1447-4f9d-b9e5-34f191ca9a28.png">

ğŸ”‘ ì¥ì ì€ ë³´ì•ˆì´ í•„ìš”í•œ API Key ë¼ë˜ì§€ app key ë¥¼ í™˜ê²½ë³€ìˆ˜ë¡œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê´€ë¦¬ë„ í¸í•˜ê³  í‚¤ ë…¸ì¶œì„ ë§‰ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ ë˜í•œ github ì˜¬ë¦´ë•Œ .gitignore
ì— ë“±ë¡í•˜ë©´ ë©ë‹ˆë‹¤

```bash
# in .gitignore
# API Key ê°’ ê°ì¶”ê¸°
*.xcconfig
```

#### ì´ˆê¸°í™” í•˜ê¸°

<img width="858" alt="image" src="https://user-images.githubusercontent.com/28912774/182256092-1c6edaf5-4a53-465e-89ec-802378e90f1a.png">

1. SwiftUI ìì²´ì—ì„œ ì´ˆê¸°í™” í•˜ê¸°

```swift
import SwiftUI
import KakaoSDKCommon
import KakaoSDKAuth

@main
struct KakaoAuthApp: App {
	init() {

		// ë©”ì¸ë²ˆë“¤ì— ìˆëŠ” ì¹´ì¹´ì˜¤ ì•±í‚¤ ë¶ˆëŸ¬ì˜¤ê¸°
		let kakaoAppKey = Bundle.main.infoDictionary?["KAKAO_NATIVE_APP_KEY"] ?? ""

		// kakao SDK ì´ˆê¸°í™”
		KakaoSDK.initSDK(appKey: kakaoAppKey as! String)
	}

    var body: some Scene {
        WindowGroup {
            ContentView()
        }
    }
}

```

2. App Delegate ì„ ì„¤ì •í•´ì„œ ì´ˆê¸°í™” í•˜ê¸°

```swift
// in MyAppDelegate.swift

import Foundation
import UIKit
import KakaoSDKCommon

class MyAppDelegate: UIResponder, UIApplicationDelegate {

	func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey : Any]? = nil) -> Bool {

		// ë©”ì¸ë²ˆë“¤ì— ìˆëŠ” ì¹´ì¹´ì˜¤ ì•±í‚¤ ë¶ˆëŸ¬ì˜¤ê¸°
		let kakaoAppKey = Bundle.main.infoDictionary?["KAKAO_NATIVE_APP_KEY"] ?? ""

		// kakao SDK ì´ˆê¸°í™”
		KakaoSDK.initSDK(appKey: kakaoAppKey as! String)
		return true
	}
}

```

```swift
@main
struct KakaoAuthApp: App {

	@UIApplicationDelegateAdaptor var appDelegate : MyAppDelegate
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
    }
}
```

### 3.ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ Delegate ì„¤ì •í•˜ê¸°

ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ë¡œê·¸ì¸ì„ êµ¬í˜„í•˜ê¸° ì „ì— í•„ìˆ˜ ì„¤ì •ì¸ AppDelegate ì„¤ì •ë²•ì…ë‹ˆë‹¤.

> https://developers.kakao.com/docs/latest/ko/kakaologin/ios

```swift
import Foundation
import UIKit
import KakaoSDKAuth


class MySceneDelegate: UIResponder, UIWindowSceneDelegate {

	func scene(_ scene: UIScene, openURLContexts URLContexts: Set<UIOpenURLContext>) {
		if let url = URLContexts.first?.url {
			if (AuthApi.isKakaoTalkLoginUrl(url)) {
				_ = AuthController.handleOpenUrl(url: url)
			}
		}
	}
}

```

```swift
import UIKit
import KakaoSDKCommon
import KakaoSDKAuth

class MyAppDelegate: UIResponder, UIApplicationDelegate {

	func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey : Any]? = nil) -> Bool {

		// ë©”ì¸ë²ˆë“¤ì— ìˆëŠ” ì¹´ì¹´ì˜¤ ì•±í‚¤ ë¶ˆëŸ¬ì˜¤ê¸°
		let kakaoAppKey = Bundle.main.infoDictionary?["KAKAO_NATIVE_APP_KEY"] ?? ""

		// kakao SDK ì´ˆê¸°í™”
		KakaoSDK.initSDK(appKey: kakaoAppKey as! String)
		return true
	}

	func application(_ app: UIApplication, open url: URL, options: [UIApplication.OpenURLOptionsKey : Any] = [:]) -> Bool {
		if (AuthApi.isKakaoTalkLoginUrl(url)) {
			return AuthController.handleOpenUrl(url: url)
		}

		return false
	}

	// appDelegate ì—ì„œ sceneDelegate ì—°ê²° í•˜ê¸°
	func application(_ application: UIApplication, configurationForConnecting connectingSceneSession: UISceneSession, options: UIScene.ConnectionOptions) -> UISceneConfiguration {

		let sceneConfigutation = UISceneConfiguration(name: nil, sessionRole: connectingSceneSession.role)

		sceneConfigutation.delegateClass = MySceneDelegate.self

		return sceneConfigutation
	}
}

```

#### Internet ì¶”ê°€ ì„¤ì •

- info.plist ì—ì„œ App Transport Security Settings ì—ì„œ Allow Arbitrary Loads ì—ì„œ `No` ì¶”ê°€ í•˜ê¸°

<img width="755" alt="image" src="https://user-images.githubusercontent.com/28912774/182272152-2dd5d591-a831-4f59-b950-e75646d65805.png">

#### ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í™œì„±í™”

ì¹´ì¹´ì˜¤ Developer page ì—ì„œ ìƒë‹¨ ë‚´ì• í”Œë¦¬ì¼€ì´ì…˜ -> ê°€ì„œ ìƒì„±ëœ app ì— ë“¤ì–´ê°„ë‹¤ìŒì— ì¢Œì¸¡ ë©”ë‰´ì— ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì—ì„œ í™œì„±í™”ë¥¼ ì„¤ì • `ON` í•´ì¤ë‹ˆë‹¤

<img width="1453" alt="image" src="https://user-images.githubusercontent.com/28912774/182273099-4972a314-fab8-4b02-a322-b261af6b7f78.png">

ê·¸ë¦¬ê³  í•˜ë‹¨ì˜ Redirect URI ì„ ì„¤ì •í•´ ì¤ë‹ˆë‹¤

<img width="1448" alt="image" src="https://user-images.githubusercontent.com/28912774/182273354-7dd39012-5c4f-436d-bb55-40e293621209.png">

ì¢Œì¸¡ë©”ë‰´ ë™ì˜ í•­ëª©ì— ê°€ì„œ ì‚¬ìš©ìì˜ ê°œì¸ í•­ëª©ì„ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— ì‚¬ìš©ìë¡œ ë¶€í„° ë™ì˜ë¥¼ ë°›ì•„ì™€ì•¼ë˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤

<img width="1409" alt="image" src="https://user-images.githubusercontent.com/28912774/182273781-21d770f6-b0cb-43fe-b843-9f87cd534b82.png">

### 4.ì¹´ì¹´ì˜¤í†¡ ì„¤ì¹˜ ì—¬ë¶€ í™•ì¸

ì‚¬ìš©ìì˜ í™˜ê²½ì— ë”°ë¼ì„œ, ì¹´ì¹´ì˜¤í†¡ì´ ì„¤ì¹˜ ë˜ëŠ” ì•ˆë˜ì–´ ìˆëŠ”ì§€ í™•ì¸ í•˜ëŠ” ì ˆì°¨ì…ë‹ˆë‹¤

> https://developers.kakao.com/docs/latest/ko/kakaologin/ios#login-through-kakaotalk

<img width="866" alt="image" src="https://user-images.githubusercontent.com/28912774/182273982-98703920-3d09-4d07-bad0-eee6b261bcd9.png">

### 5.ViewModel ì—ì„œ ì¹´ì¹´ì˜¤í†¡ ë¡œê·¸ì¸ ë¡œì§ ìƒì„±

```swift
// in ViewModel

import Foundation
import Combine
import KakaoSDKAuth
import KakaoSDKUser


class KakaoAuthVM: ObservableObject {

	func handleKakaoLogin() {
		// ì¹´ì¹´ì˜¤í†¡ ì„¤ì¹˜ ì—¬ë¶€ í™•ì¸ - ì‚¬ìš©ìì˜ ì•±ì— ì¹´ì¹´ì˜¤í†¡ ì„¤ì¹˜ ì—¬ë¶€ í™•ì¸

		// ì¹´ì¹´ì¹´í†¡ ì•±ì„ í†µí•´ì„œ ë¡œê·¸ì¸ í•˜ê¸°
		if (UserApi.isKakaoTalkLoginAvailable()) {
			UserApi.shared.loginWithKakaoTalk {(oauthToken, error) in
				if let error = error {
					print(error)
				}
				else {
					print("loginWithKakaoTalk() success.")

					//do something
					_ = oauthToken
				}
			}
		} else { // ì¹´ì¹´ì˜¤í†¡ì´ ì„¤ì¹˜ê°€ ì•ˆë˜ì–´ ìˆì„ ê²½ìš°
			// ì¹´ì¹´ì˜¤ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í•˜ê¸° - ì›¹ë·°ë¥¼ ì—´ëŸ¬ì„œ ë¡œê·¸ì¸ í•˜ê¸°
			UserApi.shared.loginWithKakaoAccount {(oauthToken, error) in
					if let error = error {
						print(error)
					}
					else {
						print("loginWithKakaoAccount() success.")

						//do something
						_ = oauthToken
					}
				}
		}

	}
}
```

<img width="407" alt="image" src="https://user-images.githubusercontent.com/28912774/182275504-5b328221-a020-421b-bded-e8a19d2c9c15.png">

### 6.ì¹´ì¹´ì˜¤í†¡ ê³„ì • ë¡œê·¸ì•„ì›ƒí•˜ê¸°

> https://developers.kakao.com/docs/latest/ko/kakaologin/ios#logout

```swift
	// MARK: - ì¹´ì¹´ì˜¤í†¡ ë¡œê·¸ì•„ì›ƒ
	func handleKakaoLogout() {
		UserApi.shared.logout {(error) in
			if let error = error {
				print(error)
			}
			else {
				print("logout() success.")
			}
		}
	}
```

```swift

```

<!-- <p align="center">
  <img height="350"  alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º" src="">
</p> -->

<!-- README í•œ ì¤„ì— ì—¬ëŸ¬ screenshoot ë†“ê¸° ì˜ˆì œ -->
<!-- <p>
   <img height="350" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º" src="">
   <img height="350" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º" src="">
   <img height="350" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º" src="">
</p> -->

---

s

<!-- ğŸ”¶ ğŸ”· ğŸ“Œ ğŸ”‘ ğŸ‘‰ -->

## ğŸ—ƒ Reference

ê°œë°œí•˜ëŠ” ì •ëŒ€ë¦¬ - [https://youtu.be/sADVK2mJ_XE](https://youtu.be/sADVK2mJ_XE)
parkgyurim - [https://velog.io/@parkgyurim/iOS-SwiftUI-Kakao-Login](https://velog.io/@parkgyurim/iOS-SwiftUI-Kakao-Login)
x
