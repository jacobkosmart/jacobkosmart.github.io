---
title: "5.import json to firestore"
excerpt: "firebase"

categories:
  - firebase

toc: true
toc_sticky: true
---

---

# data.json íŒŒì¼ì„ firebase store ì— import í•˜ê¸°

## 1.Node.js ì¤€ë¹„

> `npm init`

- firestore-export-import í˜í‚¤ì§€ ì„¤ì¹˜

> `npm i firestore-export-import`

## 2.Firebase ì„¤ì •

- firestore ì— ì ‘ì†í•˜ê¸° ìœ„í•œ í™˜ê²½ë³€ìˆ˜ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤. firebase í”„ë¡œì íŠ¸ì—ì„œ ì›¹ì•± ì¶”ê°€ í•˜ê³  firebaseconfig íŒŒì¼ì„ ë³µì‚¬í•©ë‹ˆë‹¤.

- root ê²½ë¡œì— config.js íŒŒì¼ë§Œë“¤ê³  `module.export` í•´ì¤ë‹ˆë‹¤

```js
// in config.js

// firebase ì—ì„œ ì €ì¥ëœ sdk key ê°’ë“¤

const firebaseConfig = {
  apiKey: "AIzaSyAdEB9FRDyUOEQP7iPo3or**********",
  authDomain: "toic-voca-app-db.firebaseapp.com",
  projectId: "toic-voca-app-db",
  storageBucket: "toic-voca-app-db.appspot.com",
  messagingSenderId: "515335408022",
  appId: "1:515335408022:web:dd3f28**************",
};

module.exports = firebaseConfig;
```

## 3.Service Account key ìƒì„±

- DB ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ private key ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. firebase ì—ì„œ project settings => service accounts tab => generate new private key í•´ì¤ë‹ˆë‹¤.

- ê·¸ëŸ¬ë©´ json íŒŒì¼ì´ ë‹¤ìš´ë°›ì•„ì§€ëŠ”ë° íŒŒì¼ëª…ì„ serviceAccount.json ë¡œ íŒŒì¼ëª… ë°”ê¾¸ê³ , root ê²½ë¡œì— ë¶™ì—¬ ë„£ìŠµë‹ˆë‹¤.

```json
// in serviceAccount.json

{
  "type": "service_account",
  "project_id": "toic-voca-app-db",
  "private_key_id": "4f3234a372f2081e25e6bd70de31b1b498db3890",
  "private_key": "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDiVVrJQGMQ77Ea\npA2Y0NsS3mut0Pperfa32MfQHaBbBV82OG2O9Og/umGi/mzrxcoAY2EQU3dvgQLr\nCpXqayV91Fc4M0Zi2C2ntt9E7V8giQc8TztWOm+vxb9x2+sgvtOMM1CA0VrwQnTF\nQfkt9BVd1bgkFv59XFR4SZKwOMpeVGeiixjNeCJ6SLpZgtaqYQhoYJnaMCb7aIpF\n6xuSGHsRWDxuTLEHo8soYBU5MzLyoiH6sBVEGeNzoEDqbVFEzOtuSR4+dwzTMTr2lB3/7AggnAVo\nJBNhRvqSkSYS1KZ4NL6rBWrxSEmOFmRIp2m2cSHB621ignw0UUGuYiUlaqEcU526\noKOVjctkbusXR9VsT0YiFKT8QaOFcYsSUwTsDrwBAoGAInYchgRY+7S8gS49Y6AJ\nGx2giT1/rCjGidY6YqwxwpvMX+IMmZ9VuiLJTrZTv3AGMPZaaRFVPI6uxN+fpazT\nVkIlYzaJNicKzpZz6DQ0frNusSPO2/hvwHQvRFwaCLvy0edq5rP1CCjKYqHW3ND+\n0Lo2j+QaJf4zyCoPJAuYSDE=\n-----END PRIVATE KEY-----\n",
  "client_email": "firebase-adminsdk-9hjjv@toic-voca-app-db.iam.gserviceaccount.com",
  "client_id": "104424801054445601366",
  "auth_uri": "https://accounts.google.com/o/oauth2/auth",
  "token_uri": "https://oauth2.googleapis.com/token",
  "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
  "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-9hjjv%40toic-voca-app-db.iam.gserviceaccount.com"
}
```

## 4.import.js ì‘ì„±

- firestore ì— ì…ë ¥í•  ë°ì´í„°ì™€ ì„¤ì •íŒŒì¼, í‚¤ íŒŒì¼ì´ ì¤€ë¹„ ë˜ì—ˆìœ¼ë‹ˆ ì‹¤ì œ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ëŠ” ë¡œì§ì„ ì‘ì„±í•©ë‹ˆë‹¤. import.js ìƒì„±

```js
// import ì €ì¥ëœ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° node í™˜ê²½ì´ê¸° ë•Œë¬¸ì— require ì‚¬ìš©
const firestoreService = require("firestore-export-import");
const firebaseConfig = require("./config.js");
const serviceAccount = require("./serviceAccount.json");

//  JSON to firestore
const jsonToFirestore = async () => {
  try {
    console.log("init firebase");
    // firestore ì´ˆê¸°í™” ì‹œì‘
    await firestoreService.initializeApp(
      serviceAccount,
      firebaseConfig.databaseURL
    );
    console.log("firebase initialized ");

    // data.json íŒŒì¼ firestore ì— push
    await firestoreService.restore("./data.json");
    console.log("upload success");
  } catch (error) {
    console.log(error);
  }
};

// í•¨ìˆ˜ ì‹¤í–‰
jsonToFirestore();
```

## 5.ë°ì´í„° ì…ë ¥ ì‹¤í–‰

> `node import.js`

- ì…ë ¥ëœ ë°ì´í„° ê°’ í™•ì¸

![image](https://user-images.githubusercontent.com/28912774/130784446-1e830cb3-c414-4602-beab-20585ffa8390.png)

ğŸ”¶ ğŸ”· ğŸ“Œ ğŸ”‘

## Reference

firestore-export-import npm - [https://www.npmjs.com/package/firestore-export-import](https://www.npmjs.com/package/firestore-export-import)

copy coding - [https://copycoding.tistory.com/315](https://copycoding.tistory.com/315)
