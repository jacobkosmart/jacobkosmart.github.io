---
title: "01.Unit Test (ë‹¨ìœ„ í…ŒìŠ¤íŠ¸)"
excerpt: "Test"

categories:
  - Test

toc: true
toc_sticky: true
last_modified_at:
---

---

# 1.í…ŒìŠ¤íŠ¸ ê°œìš”

## Unit Test 

- ë‹¨ìœ„(Unit) í…ŒìŠ¤íŠ¸ë€ ë°ì´í„°(ìƒíƒœ), í•¨ìˆ˜(ë©”ì†Œë“œ), ì»´í¬ë„ŒíŠ¸ ë“±ì˜ ì •ì˜ëœ í”„ë¡œê·¸ë¨ ìµœì†Œ ë‹¨ìœ„ë“¤ì´ ë…ë¦½ì ìœ¼ë¡œ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë°©ë²•. 

- ì¦‰ ì£¼ê´€ì ìœ¼ë¡œ ì •ì˜ëœ ê²ƒì— ëŒ€í•œ í•˜ë‚˜í•˜ë‚˜ë¥¼ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê°œë…ì„. 

- ë‚˜ì¤‘ì— ìˆ˜ì •í•  ë¶€ë¶„ì´ ìˆìœ¼ë©´ í…ŒìŠ¤íŠ¸ í•œ í•­ëª©ì„ ê¸°ë°˜ìœ¼ë¡œ ë” ì•ˆì •ì ìœ¼ë¡œ ìˆ˜ì •ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì‘ì„±í•œ ë¡œì§ì´ ì½”ë“œìœ„ì£¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê¸° ë•Œë¬¸ì— ê°€ë³ê³ , ë” ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ëŒ€í‘œì ì¸ Unit Test tool ë¡œëŠ” Jest ê°€ ìˆìŠµë‹ˆë‹¤. (JavaScript test ìš©)


## E2E Test 

- E2E (End to End) í…ŒìŠ¤íŠ¸ë€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì²˜ìŒë¶€í„° ëê¹Œì§€ì˜ ì‹¤ì œ ì‚¬ìš©ìì˜ ê´€ì ì—ì„œ ì‚¬ìš© íë¦„ì„ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

- ì‹¤ì œ ë¸Œë¼ìš°ì € í™”ë©´ì—ì„œ ë§Œë“¤ì–´ì§„ ì‚¬ì´íŠ¸ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ë©´ì„œ ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.

- ëŒ€í‘œì ì¸ E2E test tool ë¡œëŠ” cypress ê°€ ìˆìŠµë‹ˆë‹¤.


# 2.í…ŒìŠ¤íŠ¸ í™˜ê²½ì„¤ì • 

- ì˜ˆì œ App test íŒŒì¼ë¡œëŠ” Jacob's DevLog ì˜ portfolio ì— ìˆëŠ” `Book-Search App` ì„ í†µí•´ ì§„í–‰ í•˜ê² ìŠµë‹ˆë‹¤. (Vue.js ê¸°ë°˜)

- Vue.js ì—ì„œ unit test ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•´ì„  ì•„ë˜ì™€ ê°™ì€ package ë¥¼ ì„¤ì¹˜ í•´ì•¼ í•©ë‹ˆë‹¤.

    - jest

    - vue test-utils

    - vue-jest

    - babel-jest


- package ì„¤ì¹˜

`$ npm i -D jest @vue/test-utils@next vue-jest@next babel-jest`


- root ê²½ë¡œì— `jest.config.js` íŒŒì¼ ìƒì„± -> í…ŒìŠ¤íŠ¸ í•  í™˜ê²½ì„¤ì • ì„¤ì •

```js
// in jest.config.js

module.exports = {
  // íŒŒì¼ í™•ì¥ìë¥¼ ì§€ì •í•˜ì§€ ì•Šì€ ê²½ìš°, Jest ê°€ ê²€ìƒ‰í•  í™•ì¥ì ëª©ë¡ì…ë‹ˆë‹¤.
  // ì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë˜ëŠ” ëª¨ë“ˆì˜ í™•ì¥ìë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
  // e.g `import HellowWorld from '~/components/HelloWorld';`
  moduleFileExtensions: [
    'js',
    'vue'
  ],

  // `~` ì™€ ê°™ì€ ê²½ë¡œ ë³„ì¹­ì„ ë§¤í•‘í•©ë‹ˆë‹¤.
  // `< rootDir>` í† í°ì„ ì‚¬ìš©í•´ ë£¨íŠ¸ ê²½ë¡œë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  moduleNameMapper: {
    '^~/(.*)$': '<rootDir>/src/$1' // regexp ë¡œ ~/ ë¡œ ì‹œì‘ë˜ëŠ” ëª¨ë“  ë¬¸ìì—´ì€ root ê²½ë¡œì˜ src í´ë”ì•ˆì˜ ëª¨ë“  ê²½ë¡œë¥¼ ë§í•¨
  },

  // ì¼ì¹˜í•˜ëŠ” ê²½ë¡œì—ì„œëŠ” ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤.
  // `<rootDir>` í† í°ì„ ì‚¬ìš©í•´ ë£¨íŠ¸ ê²½ë¡œë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  modulePathIgnorePatterns: [
    '<rootDir>/node_modules',
    '<rootDir>/dist'
  ],

  // jsdom í™˜ê²½ì— ëŒ€í•œ URL ì„ ì„¤ì •í•©ë‹ˆë‹¤.
  // https://github.com/facebook/jest/issues/6766
  testURL: 'https://localhost',

  // ì •ê·œì‹ê³¼ ì¼ì¹˜í•˜ëŠ” íŒŒì¼ì˜ ë³€í™˜ ëª¨ë“ˆì„ ì§€ì •í•©ë‹ˆë‹¤.
  transform: {
    '^.+\\.vue$': 'vue-jest',
    '^.+\\.js$': 'babel-jest'
  }
}

```

- eslint ê°€ ì„¤ì¹˜ ë˜ì–´ ìˆìœ¼ë©´ test ì‹œ ì¶©ëŒ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì‚¬ì „ì— ì •ì˜ëœ ì „ì—­ ë³€ìˆ˜ë¥¼ ë¯¸ë¦¬ ì„¤ì • í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. root ê²½ë¡œì— ìˆëŠ”  `.eslintrc.js` ì—ì„œ..

```js
// in .eslintrc.js
module.exports = {
  // ì‚¬ì „ì— ì •ì˜ëœ ì „ì—­ ë³€ìˆ˜ ì„¤ì •
  env: {
    browser: true,
    node: true,
    jest: true
  }

```

# 3.ì´ˆê¸° í…ŒìŠ¤íŠ¸ ì‹¤í–‰

- ì˜ˆë¥¼ ë“¤ì–´ í•˜ë‚˜ì˜ js íŒŒì¼ì„ test í•˜ê¸° ìœ„í•´ì„  ë°ì´í„°(í•¨ìˆ˜) ë“±ì„ export í•  ìˆ˜ ìˆëŠ” í†µë¡œë¥¼ ë§Œë“¤ì–´ ì¤˜ì•¼ì§€ test ì‘ë™ íŒŒì¼ë¡œ ë°ì´í„°ë¥¼ ë‚´ë³´ë‚´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ export ë¥¼ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

```js
// in example.js

export function double(num) {
  return num * 2
}
```

- ì¦‰, vue ë‚˜ js íŒŒì¼ì•ˆì— ìˆëŠ” íŒŒì¼ì˜ ë°ì´í„°ë‚˜, í•¨ìˆ˜ëŠ” export ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ ê²°êµ­ í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.


- script ìƒì—ì„œ jest ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ `packge.json` íŒŒì¼ì—ì„œ script ë“±ë¡ì„ ë‹¤ìŒê³¼ ê°™ì´ í•´ì¤ë‹ˆë‹¤.

```json
  "scripts": {
    "test:unit": "jest --watchAl" // watchAll flag ì€ ë³€ê²½ì‚¬í•­ì´ ë°œìƒ ë  ê²½ìš° ìë™ìœ¼ë¡œ ê°ì§€í•´ì„œ test í™˜ê²½ì„ ë‹¤ì‹œí•œë²ˆ ë™ì‘ ì‹œí‚¤ëŠ” flag ì…ë‹ˆë‹¤
  }
```

- test í•  ë¶€ë¶„ ì‘ì„±

```js
// in example.test.js

import { expect, test } from '@jest/globals'
import { double } from './example'

test('Sample test', () => {
  expect(123).toBe(123)
})
```

- terminal ì—ì„œ `$ npm run test:unit` ì„ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŒ ê°™ì€ ë©”ì„¸ì§€ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/28912774/122634253-12d06680-d118-11eb-9b20-811abaab8717.png)


- ë§Œì•½ test ì—ì„œ fail í•  ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ ì¶œë ¥ ë©ë‹ˆë‹¤.

```js
// in example.test.js

import { expect, test } from '@jest/globals'
import { double } from './example'

test('Sample test', () => {// expect ëŠ” ì‹¤ì œ ë“¤ì–´ì˜¤ëŠ” ê°’ì´ê³ , tobe ëŠ” í•¨ìˆ˜ ì‹¤í–‰ ì‹œ, ì¶œë ¥ì´ ì˜ˆìƒë˜ëŠ” ê°’ì„ ê°€ë¦¬í‚´ 
  expect(123).toBe('123') // ì¼ë¶€ë¡œ 123ì„ str ë¡œ ë³€í™˜í•´ì„œ test ì§„í–‰ -> fail ìœ ë„
})
```
![image](https://user-images.githubusercontent.com/28912774/122634324-85414680-d118-11eb-84ed-e5726b79343d.png)


- `received` ëŠ” ë°›ì€ ê°’ì„ ì˜ë¯¸í•˜ê³ , `expected` ëŠ” ê¸°ëŒ€ë˜ëŠ” ê°’ì„ ê°€ë¦¬í‚¤ëŠ”ë° ë‘ê°œì˜ ê°’ì´ ì¼ì¹˜ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— `test` ì—ì„œ `fail` ì´ ë‚˜íƒ€ë‚˜ê²Œ ë¨

- ë§ˆì°¬ê°€ì§€ë¡œ ë‹¤ë¥¸ test ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì¼ë‹¨ `tobe()` ì— ì„ì˜ì˜ ê°’ì„ ì…ë ¥í•˜ê³ , `test()` ë¥¼ ì‹¤í–‰í•˜ë©´ `fail` ì´ ë‚˜ì˜¤ëŠ”ë° `expected` ê°’ì„ `received` ê°’ìœ¼ë¡œ ë°”ê¿”ì„œ ë„£ì–´ì£¼ë©´ `pass` ê°€ ë©ë‹ˆë‹¤


```js
import { expect, test } from '@jest/globals'
import { double } from './example'

test('parameter is a number', () => {
  expect(double(3)).toBe(7)
})
```

![image](https://user-images.githubusercontent.com/28912774/122638953-31435b80-d132-11eb-9b63-4b5872cc39a3.png)

![image](https://user-images.githubusercontent.com/28912774/122638986-589a2880-d132-11eb-80df-d159e1043880.png)


ğŸ”¶ ğŸ”·  ğŸ“Œ ğŸ”‘

## Reference

- vuex official page- [https://next.vuex.vuejs.org/](https://next.vuex.vuejs.org/){:target="\_blank"}


