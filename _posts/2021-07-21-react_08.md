---
title: "08.hooks"
excerpt: "react"

categories:
  - react

toc: true
toc_sticky: true
---

---

## 1.React Hooks ì´ë¡ 

- ReactHooks ëŠ” class ì—†ì´ state ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ ê¸°ëŠ¥ì…ë‹ˆë‹¤.

### Hooks ê°€ í•„ìš”í•œ ì´ìœ 

í•­ìƒ ê¸°ìˆ ì€ ê·¸ ì „ì— ê²ƒì˜ ë¶ˆí¸í•¨ì´ë‚˜ ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë”ìš± ë°œì „í•©ë‚˜ë””ã….

ê·¸ì™€ ê°™ì´ React Hooks ë„ ì£¼ë¡œ Class Component ë¡œ ì‚¬ìš©ë˜ì–´ì˜¨ React ì—ì„œ ëŠê»´ì™”ë˜ ë¶ˆí¸í•¨ì´ë‚˜ ë¬¸ì œì ë“¤ì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ê°œë°œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì›ë˜ëŠ” ReactëŠ” ì£¼ë¡œ Class Component ë¥¼ ì‚¬ìš©í•˜ê³  React HooksëŠ” Functional component ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

- React lifecycle

![image](https://user-images.githubusercontent.com/28912774/128592065-25b1a623-00f0-4de3-97e7-fe91de184ebb.png)

Class Component ì—ì„œëŠ” ìƒëª…ì£¼ê¸°ë¥¼ ì´ìš©í•  ë•Œ componentDidMount, ComponentDidUpdate, componentWillUnmount ì´ë ‡ê²Œ ë‹¤ë¥´ê²Œ ì²˜ë¦¬ë¥¼ í•´ì£¼ì§€ë§Œ react hooks ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” useEffect ì•ˆì—ì„œ ë‹¤ ì²˜ë¦¬ë¥¼ í•´ì¤„ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

## 2.useState

- stateë¥¼ ëŒ€ì²´ í•´ì„œ function component

- useState ëŠ” ë‘ë²ˆì§¸ ìˆëŠ” setState ëŠ” ê°’ì´ ë³€ê²½ ë ë•Œ ë§ˆë‹¤ re-render ê°€ ëœë‹¤.

```js
const [item, setItem] = useState(1);
```

ìœ„ì— ì½”ë“œì—ì„œ useState ëŠ” number 1 ì„ ì´ˆê¸° ê°’ìœ¼ë¡œ í•˜ê³  return ìœ¼ë¡œ arr ë¥¼ 2ê°€ì§€ value ë¥¼ return í•©ë‹ˆë‹¤.

ì²«ë²ˆì§¸ëŠ” itemì€ ì´ˆê¸°ê°’ì¸ 1ì„ ì €ì¥í•˜ëŠ” ê°’ì´ê³  setItem ì€ ë³€ê²½ì„ ìœ„í•œ value ê°’ì´ë¼ê³  ë³´ë©´ ë©ë‹ˆë‹¤.

```js
import React, { useState } from "react";
import "./App.css";

const App = () => {
  const [item, setItem] = useState(1);
  const incrementItem = () => setItem(item + 1);
  const decrementItem = () => setItem(item - 1);

  return (
    <div className="App">
      <h1>Hello {item}</h1>
      <h2>Start editing to see some magic happen!</h2>

      <button onClick={incrementItem}>Increment</button>
      <button onClick={decrementItem}>Decrement</button>
    </div>
  );
};

export default App;
```

## 3.useEffect

- ë¼ì´í”„ ì‚¬ì´í´ í›…ì„ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤ (componentDidMount, componentDidUpdate, componentWillUmount)

- 2ê°œì˜ parameter ë¥¼ ë°›ëŠ”ë°, ì²«ë²ˆì§¸ëŠ” function ìœ¼ë¡œì¨ì˜ effect, ë‘ë²ˆì§¸ëŠ” dependency ì„

ì˜ˆì‹œ

```js
// sayHello ë¼ëŠ” í•¨ìˆ˜ê°€ ë³€í• ë•Œ (render) ë ë•Œ ë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ”ëŒ€ dependency ê°€ number ì¸ ê²ƒë§Œ ì˜ì¡´ì ìœ¼ë¡œ ë³€ê²½ëœë‹¤ëŠ” ì˜ë¯¸ì„
// componentDidMount ì™€ componentWillUpdate ì¸ë° number ì¼ë•Œë§Œ ì—…ë°ì´íŠ¸ë¥¼ í•¨
useEffect(sayHello, [number]);

// ë‘ë²ˆì§¸ ì¸ìë¡œ ë¹ˆ arr ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì´ˆê¸° ì‹¤í–‰ í• ë•Œ 1ë²ˆë§Œ ì‹¤í–‰í•˜ê²Œ ë¨
useEffect(sayHello, []);
```

- ì¦‰ **useEffect** ëŠ” componentDidMount, componentWillUnMount, componentDidUpdate ì„ functional component ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ

## 4.custom Hooks

- ì‚¬ìš©ìì˜ í¸ì˜ì— ì˜í•´ì„œ hook ì„ ì¬ì‘í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒ

### HOC ëŒ€ì²´

- HOC component ë¥¼ Custom Hooks ë¡œ ëŒ€ì²´í•´ì„œ ë§ì€ Wrapper component ë¥¼ ì¤„ì¼ ìˆ˜ ìˆê²Œ ë¨

#### HOC (Higher Order Component)ë€?

í™”ë©´ì—ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë¡œì§ë§Œì„ ë¶„ë¦¬í•´ì„œ componentë¡œ ë§Œë“¤ê³ , ì¬ì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ UI ì™€ ê°™ì€ ë‹¤ë¥¸ ë¶€ë¶„ë“¤ì€ parameter ë¡œ ë°›ì•„ì„œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

- ì˜ˆë¥¼ ë“¤ì–´ ìœ ì € ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê³µí†µì ì¸ ë¶€ë¶„ì„ HOC ë¡œ ë§Œë“¤ì–´ì„œ ë„£ì–´ì£¼ê³ , ê·¸ HOC ë¥¼ ê°ê° ì»´í¬ë„ŒíŠ¸ë¡œ ê°ì‹¸ì£¼ë©´ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ë”°ë¡œ ì¸ì¦ì„ ìœ„í•œ ë¶€ë¶„ì€ ë„£ì§€ ì•Šì•„ì„œ ì¤‘ë³µëœ ì½”ë“œë“¤ì„ ë°˜ë³µì ìœ¼ë¡œ ì²˜ë¦¬ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Hooks ê°€ ë‚˜ì˜¤ê¸° ì „ì— class component ì—ì„œëŠ” HOC ë¥¼ ì£¼ë¡œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ë¬¸ì œëŠ” ì½”ë“œê°€ ë³µì¡í•˜ê³  ê¸¸ì–´ì§€ê²Œ ë˜ë©´ ë§ì€ Wrapper component ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. Wrapper ê°€ ë„ˆë¬´ ë§ì•„ ì§€ê²Œ ë˜ë©´ ë°ì´í„° íë¦„ì„ íŒŒì•…í•˜ê¸°ê°€ í˜ë“¤ì–´ ì§‘ë‹ˆë‹¤.

```js
// Wrapper ì˜ˆì‹œ

<LanguageHOC>
  <ThemeHOC>
    <AuthHOC>
      <APage />
    </AuthHOC>
  </ThemeHOC>
</LanguageHOC>
```

ì´ëŸ¬í•œ ë¬¸ì œë“¤ì€ Hooks ì˜ Custom Hooks ë¥¼ ì‚¬ìš©í•´ì„œ í•´ê²° í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### useWindowWidth

```js
// window ì°½ì´ resize ë ë•Œë§ˆë‹¤ width ê°’ì„ returní•˜ëŠ” custom hook

import { useEffect, useState } from "react";

function useWindowWidth() {
  // í˜„ì¬ ë¸Œë¼ìš°ì €ì˜ width ê°’ì˜ ì´ˆê¸°í™” ê°’ì„
  const [width, setWidth] = useState(window.innerWidth);

  useEffect(() => {
    // resize í•¨ìˆ˜ ì„ ì–¸
    const resize = () => {
      setWidth(window.innerWidth);
    };
    // window ì— resize ê°€ ì¼ì–´ë‚˜ë©´ resize í•¨ìˆ˜ê°€ ì‹¤í–‰ ë˜ê²Œ ì´ë²¤íŠ¸ ì„¤ì •
    window.addEventListener("resize", resize);
    // cleanUP
    return () => {
      window.removeEventListener("resize", resize);
    };
    // dependency ì„¤ì •
  }, []);

  return width;
}

export default useWindowWidth;
```

## 5.useReducer

- useState ì˜ í™•ì¥íŒì„

- ë‹¤ìˆ˜ì˜ í•˜ìœ—ê°’ì„ í¬í•¨í•˜ëŠ” ë³µì¡í•œ ì •ì  ë¡œì§ì„ ë§Œë“œëŠ” ê²½ìš°

- ë‹¤ìŒ state ê°€ ì´ì „ state ì— ì˜ì¡´ì ì¸ ê²½ìš°

- Redux ë¥¼ ì•ˆë‹¤ë©´ ì‰½ê²Œ ì‚¬ìš© ê°€ëŠ¥

```js
// useReducer sample

import { useReducer } from "react";

// reducer - state ë¥¼ ë³€ê²½í•˜ëŠ” ë¡œì§ì´ ë‹´ê²¨ ìˆëŠ” í•¨ìˆ˜ ì´ì „ state ì— ì˜ì¡´ì ì¼ë•Œ ì‚¬ìš©í•˜ê¸° ì¢‹ìŒ
const reducer = (state, action) => {
  if (action.type === "PLUS") {
    return {
      count: state.count + 1,
    };
  }
  return state;
};

// dispatch - action ê°ì²´ë¥¼ ë„£ì–´ì„œ ì‹¤í–‰

// action ì€ ê°ì²´ì´ê³  í•„ìˆ˜ í”„ë¡œí¼í‹°ë¡œì„œ type ì„ ê°€ì§„ë‹¤

const Example6 = () => {
  const [state, dispatch] = useReducer(reducer, { count: 0 });

  return (
    <div>
      <p>You clicked {state.count} times</p>
      <button onClick={click}>Click me</button>
    </div>
  );

  function click() {
    dispatch({ type: "PLUS" });
  }
};

export default Example6;
```

## 6.useMemo, useCallback, useRef

- render ì‚¬ì´ì—ì„œ ì–´ë– í•œ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ì„

- class component ë¥¼ ì‚¬ìš©í• ë•ŒëŠ” ê³„ì† render method ë§Œ ëŒê¸° ë•Œë¬¸ì— class ì•ˆì— ìˆëŠ” ê²ƒë“¤ì´ ìœ ì§€ê°€ ë˜ì—ˆëŠ”ë°, function ì€ ìƒì„±ì´ ë˜ë©´ì„œ ê·¸ì•ˆì— ìˆëŠ” ê²ƒë“¤ì€ ìƒˆë¡œ ìƒì„±ë˜ëŠ” ê²½í–¥ì´ ìˆê¸°ë•Œë¬¸ì— render ì‚¬ì´ì— ì–´ë– í•œ ê°’ì„ ì €ì¥í•˜ê³  ë³´ê´€ í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ë˜ëŠ” hooks (useMemo, useCallback, useRef)ë¼ê³  ë³´ë©´ ë¨

### useMemo , useCallback

```js
// useMemo, useCallback, useRef ì‚¬ìš©í•˜ê¸°

import { useCallback, useMemo, useState } from "react";

const sum = (persons) => {
  console.log("sum...");
  return persons.map((person) => person.age).reduce((a, b) => a + b, 0);
};

const Example7 = () => {
  const [value, setValue] = useState();
  const [persons] = useState([
    { name: "Jacob", age: 30 },
    { name: "John", age: 20 },
  ]);

  // ë°˜ë³µëœ ì‚¬ìš©ì„ ë§‰ê¸° ìœ„í•´ useMemo ì‚¬ìš©
  // Persons ì— ì˜ì¡´ì ì¸ count ëŠ” ë‹¤ì‹œ ê³„ì‚°ì´ ì•ˆë˜ê²Œ í•˜ëŠ”ê²ƒ => reactë¥¼ ìµœì í™” í•˜ëŠ”ë° ë„ì›€ì´ ë§ì´ ë¨
  const count = useMemo(() => {
    return sum(persons);
  }, [persons]);

  // useCallback ì€ ì•ˆì— ë“¤ì–´ìˆëŠ” í•¨ìˆ˜ë¥¼ ì–¸ì œ ìƒˆë¡œ ì„¸íŒ…í•´ ì¤„ê±´ì§€ë¥¼ dependency ë¦¬ìŠ¤íŠ¸ì— ì˜ì¡´ì ìœ¼ë¡œ ê²°ì •í•´ì„œ í´ë¦­ì•ˆìœ¼ë¡œ ë„£ì–´ ì¤„ê±´ì§€ë¥¼ ì •í•´ì£¼ëŠ”ê²ƒ
  const click = useCallback(() => {
    console.log(value);
  }, []);

  const change = (e) => {
    setValue(e.target.value);
  };

  return (
    <div>
      <input value={value} onChange={change} />
      <p>{count}</p>
      <button onClick={click}>Click</button>
    </div>
  );
};

export default Example7;
```

### useRef

```js
//  useRef ì‚¬ìš©í•˜ê¸°

import { createRef, useRef, useState } from "react";

const Example8 = () => {
  const [value, setValue] = useState();

  // createRef ë¡œ ë§Œë“  input1Ref ëŠ” í•­ìƒ ìœ ì§€í•˜ëŠ”ê²ƒì´ ì•„ë‹ˆë¼ render ë ë•Œ ë§ˆë‹¤ ìƒˆë¡œ reference ë¥¼ ë§Œë“¤ì–´ì„œ render ê°€ ë ë•Œ ë§ˆë‹¤ inputì— ë„£ì–´ì£¼ëŠ”ê²ƒ
  // ì¦‰, render ë ë•Œë§Œ ë„£ì–´ì£¼ëŠ”ê²ƒ
  const input1Ref = createRef();

  // useRef ë¡œ ë§Œë“  input2Ref ëŠ” render ë¥¼ ëŒì•„ë„ ê³„ì† ìœ ì§€ë¥¼ í•˜ëŠ”ê²ƒ ëŒ€ì‹ ì— ì²«ë²ˆì§¸ëŠ” ì§„í–‰ëœê²ƒì´ ì—†ìœ¼ë‹ˆê¹Œ undefined ê°€ ë‚˜ì˜¨ê±°ê³  render ê°€ ì§„í–‰ë˜ë©´ ìƒì„±ëœ reference ê°’ì„ ë‚˜íƒ€ë‚´ê²Œ ë¨
  // render ì‚¬ì´ì—ë„ ê·¸ê²ƒì„ ìœ ì§€í•´ì£¼ëŠ” ê²ƒ
  const input2Ref = useRef();

  console.log(input1Ref.current, input2Ref.current);

  const change = (e) => {
    setValue(e.target.value);
  };

  return (
    <div>
      <input value={value} onChange={change} />
      <input ref={input1Ref} />
      <input ref={input2Ref} />
    </div>
  );
};

export default Example8;
```

## 7.React router hooks

> [React router hooks ìì„¸íˆë³´ê¸°](https://reactrouter.com/web/api/Hooks)

### useHistory

- useHistoryëŠ” ì¼ë°˜ì ì¸ history ê°ì²´ì™€ ë˜‘ê°™ì€ ê°ì²´ë¥¼ ê°€ì§€ë¯€ë¡œ ì‚¬ìš©ë²•ì´ ë™ì¼í•˜ë©°, ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì¤€ë¹„ë‹¨ê³„ëŠ” ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.

```js
import React from "react";
import { useHistory } from "react-router-dom";

const Home = () => {
  const history = useHistory();
  // historyë¥¼ propsì—ì„œ ì–»ì–´ì™”ì„ ë•Œ ì²˜ëŸ¼ ë™ì¼í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

  return (
    <div onClick={() => history.push("/auth")}>
      <div>Hello!</div>
    </div>
  );
};

export default Home;
```

### useLocation

- useLocation hooksëŠ” ì‚¬ìš©ìê°€ í˜„ì¬ ë¨¸ë¬¼ëŸ¬ìˆëŠ” í˜ì´ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì•Œë ¤ì£¼ëŠ” hooks ì…ë‹ˆë‹¤.
  ì´ hooksëŠ” defaultProps í•˜ë‚˜ì¸ location ê°ì²´ë¥¼ ëŒ€ì²´ í•˜ëŠ” react-router-dom hooks ì…ë‹ˆë‹¤.

```js
import React from "react";
import { useLocation } from "react-router-dom";

const Home = () => {
  const location = useLocation();
  console.log(location); // pathnameê³¼ searchë¼ëŠ” ê°ì²´ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.

  return <></>;
};

export default Home;
```

- searchëŠ” ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ë¶„ì„í•´ì•¼í•˜ëŠ” ìƒí™©ì—ì„œ ìœ ìš©í•©ë‹ˆë‹¤. ì•ì—ì„œ pathnameì´ ì¶œë ¥í–ˆë˜ ë¶€ë¶„ì„ ì œì™¸í•œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì´ ì¶œë ¥ë˜ë©°, ê²°ê³¼ëŠ” ?keyword=ë¦¬ì•¡íŠ¸ ë¼ëŠ” ì¶œë ¥ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤. ì¶œë ¥ëœ ê°’ì€ query-stringì´ë¼ëŠ” ì¿¼ë¦¬ìŠ¤íŠ¸ë§ íŒŒì‹± ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ì—¬ ì œëŒ€ë¡œ ëœ ê°’ì„ ì–»ì–´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
import React from "react";
import { useLocation } from "react-router-dom";
import queryString from "query-string";

const Home = () => {
  const { search } = useLocation();
  // search: ?keyword=ë¦¬ì•¡íŠ¸

  const { keyword } = queryString.parse(search);
  // keyword ì¶œë ¥ê²°ê³¼: "ë¦¬ì•¡íŠ¸"

  return <></>;
};

export default Home;
```

### useParams

- useLocation ê³¼ ë¹„ìŠ·í•œ hooks ì¸ë° ì™œëƒí•˜ë©´ useLocationì€ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ì •ë³´ë¥¼ ì–»ëŠ”ë° ìœ ìš©í•˜ë‹¤ê³  í•˜ë©´, useParamsëŠ” path parameterì˜ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ” hooksì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

- ë¨¼ì €, useParamsë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ë™ì  ë¼ìš°íŒ… ì„¤ì •ì„ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì„¤ì •ë²•ì€ App.jsì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ë‚´ìš©ì„ ì¶”ê°€í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.

```js
// App.js

import React from "react";
import { BrowserRouter, Switch, Route } from "react-router-dom";
import Home from "components/Home";

const App = (): JSX.Element => {
  return (
    <BrowserRouter>
      <Switch>
        <Route exact path="/home/:id" component={Home} />
        {/* idë¼ëŠ” ë™ì  ë¼ìš°íŒ…ê°’ì„ ê±¸ì–´ì£¼ì—ˆë‹¤. */}
      </Switch>
    </BrowserRouter>
  );
};

export default App;
```

- : (ì½œë¡ )ì„ ì´ìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ê³„í•´ë†“ìœ¼ë©´, /home/ ë’¤ì— 1ì´ ì˜¤ë“ , 2ê°€ ì˜¤ë“ , í˜¹ì€ ë¬¸ìì—´ì´ ì˜¤ë“  ìƒê´€ì—†ì´ ë¼ìš°íŒ…ì´ ì •ìƒ ì‘ë™ë©ë‹ˆë‹¤.

- ì´ì œ Home ì»´í¬ë„ŒíŠ¸ì—ì„œ path parameter ( ë™ì  ë¼ìš°íŒ… ê°’ )ì„ ì½ì–´ì˜¤ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.
  ê¸°ì¡´ì—ëŠ” match propsë¥¼ ì´ìš©í•˜ì—¬ match.params.idì˜ í˜•ì‹ìœ¼ë¡œ ì ‘ê·¼ì„ í•´ì•¼ í–ˆì§€ë§Œ, useParamsë¥¼ ì´ìš©í•˜ë©´ ì¢€ ë” ê°„ë‹¨í•˜ê²Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```js
// in home.js

import React from "react";
import { useParams } from "react-router-dom";

const Home = () => {
  const { id } = useParams();
  // ë™ì  ë¼ìš°íŒ… ê°’ìœ¼ë¡œ ê±¸ì–´ë‘” ì´ë¦„ìœ¼ë¡œ ê°ì²´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

  // í˜„ì¬ ì£¼ì†Œì˜ ê°’ì´ http://localhost:3000/home/3 ì¼ë•Œ
  console.log(id); // "3"ì´ ì¶œë ¥ëœë‹¤.

  return <></>;
};

export default Home;
```

ğŸ”¶ ğŸ”· ğŸ“Œ ğŸ”‘

## Reference

- react hooks - [https://reactjs.org/docs/hooks-intro.html](https://reactjs.org/docs/hooks-intro.html)

- react Ajax- [https://reactjs.org/docs/faq-ajax.html](https://reactjs.org/docs/faq-ajax.html){:target="\_blank"}
