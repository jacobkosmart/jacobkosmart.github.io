---
title: "11.redux"
excerpt: "react"

categories:
  - react

toc: true
toc_sticky: true
---

---

- Redux ë¥¼ ì“°ëŠ” ì´ìœ ..

  1.ë³µì¡í•œ props ì „ì†¡ì´ í•„ìš” ì—†ìŒ 2.ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ì§ì ‘ ë°ì´í„°ë¥¼ êº¼ë‚´ì„œ ì“¸ ìˆ˜ ìˆìŒ
  3.state ë°ì´í„° ê´€ë¦¬ ê¸°ëŠ¥

## 1.ì„¤ì¹˜ ë° ì‚¬ìš©

```bash
$ yarn add redux react-redux
```

redux ëŠ” ë°ì´í„°ë¥¼ ì—„ê²©í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥, react-redux ëŠ” ë¦¬ë•ìŠ¤ë¥¼ ë¦¬ì—‘íŠ¸ì—ì„œ ì“¸ ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µ

### 1-1.index.js ì—ì„œ redux ì´ˆê¸° ì„¤ì •

reduxë¥¼ ì´ìš©í•œ ê°œë°œí™˜ê²½ì„ ì…‹íŒ…í•˜ì‹œë ¤ë©´ index.jsë¥¼ ì—´ì–´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•©ë‹ˆë‹¤..

```js
// in index.js

import { Provider } from "react-redux";

ReactDOM.render(
  <React.StrictMode>
    <BrowserRouter>
      <Provider>
        <App />
      </Provider>
    </BrowserRouter>
  </React.StrictMode>
);
```

- <Provider>ë¼ëŠ”ê±¸ import í•´ì˜¤ì‹  ë‹¤ìŒì—

- ë‚´ê°€ stateê°’ ê³µìœ ë¥¼ ì›í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ ê°ì‹¸ì‹œë©´ ë©ë‹ˆë‹¤.

- <App> ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ìŒŒìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ <App>ì»´í¬ë„ŒíŠ¸ì™€ ê·¸ ì•ˆì—ìˆëŠ” ëª¨ë“  HTML, ì»´í¬ë„ŒíŠ¸ë“¤ì€ ì „ë¶€ stateë¥¼ ì§ì ‘! props ì „ì†¡ì—†ì´! ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ”· ì´ê²ƒì´ **reduxë¥¼ ì´ìš©í•˜ëŠ” ì²«ë²ˆì§¸ ì´ìœ **ì…ë‹ˆë‹¤

ì»´í¬ë„ŒíŠ¸ê°€ ë§¤ìš° ê¹Šìˆ™íˆ ìˆë‹¤ë©´ stateì „ë‹¬í•˜ë ¤ê³  props 100ë²ˆ ì¨ì•¼ë˜ê³  ê·€ì°®ì€ë°

reduxë¥¼ ì´ë ‡ê²Œ ì…‹íŒ…í•´ì£¼ì‹œë©´ props 100ë²ˆ ì“°ì‹¤ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ë°”ë¡œ êº¼ë‚´ì“°ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

(Context ê·¸ ë¬¸ë²•ì´ë‘ ë§¤ìš° ë¹„ìŠ·í•©ë‹ˆë‹¤.)

---

ğŸ“Œ reduxì—ì„œ stateë¥¼ í•˜ë‚˜ ë§Œë“œì‹œë ¤ë©´ createStore() í•¨ìˆ˜ë¥¼ ì“°ì…”ì•¼í•©ë‹ˆë‹¤.

```js
import { Provider } from "react-redux";
import { createStore } from "redux";

let store = createStore(() => {
  return [{ id: 0, name: "niceShoes", quan: 2 }];
});

ReactDOM.render(
  <React.StrictMode>
    <BrowserRouter>
      <Provider>
        <App />
      </Provider>
    </BrowserRouter>
  </React.StrictMode>
);
```

import í•´ì˜¤ì‹  ë‹¤ìŒì— createStore(ì½œë°±í•¨ìˆ˜) ì´ë ‡ê²Œ ì‚¬ìš©í•˜ì‹œë©´ ë˜ë©°

ì½œë°±í•¨ìˆ˜ì—” ë­˜ ì‘ì„±í•˜ëƒë©´.. ë‚´ê°€ ì›í•˜ëŠ” state ì´ˆê¸°ê°’ìœ¼ë¡œ ë‚´ë³´ë‚¼ ê°’ì„ ì •í•´ì„œ .

ê·¸ëŸ¼ store ì— ì €ì¥ëœ state ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

ì´ì œ `<Provider>` ì— ë§Œë“  state ë¥¼ props ì²˜ëŸ¼ ë“±ë¡í•´ì„œ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

```js
import { Provider } from "react-redux";
import { createStore } from "redux";

let store = createStore(() => {
  return [{ id: 0, name: "niceShoes", quan: 2 }];
});

ReactDOM.render(
  <React.StrictMode>
    <BrowserRouter>
      <Provider store={store}>
        <App />
      </Provider>
    </BrowserRouter>
  </React.StrictMode>
);
```

redux ì„¤ì¹˜ í›„ì—” stateë“¤ì„ storeë¼ëŠ” ëª…ì¹­ìœ¼ë¡œ ë¶€ë¦…ë‹ˆë‹¤. ì•„ê¹Œ ë³€ìˆ˜ëª…ì´ storeì´ê¸°ë„ í•˜ê³ ìš”

### 1-2.storeì— ìˆëŠ” state ë°ì´í„° êº¼ë‚´ì“°ëŠ” ë²•

- ì˜ˆì‹œë¡œ Cart.js ë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ table ìƒì„± í›„, ê·¸ í…Œì´ë¸” ì•ˆì— store ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ë°ì´í„° ë°”ì¸ë”©í•´ì„œ ì‚¬ìš©í•˜ê¸°

- ê·¸ëƒ¥ ë°”ë¡œ ì‚¬ìš©í•˜ë©´ ì•ˆë˜ê³  store ì•ˆì— ìˆëŠ” ë°ì´í„°ë¥¼ props ì˜ í˜•íƒœë¡œ ë“±ë¡í•´ì„œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

```js
// connect ë¥¼ import í•´ì˜´ redux ë¡œ ë¶€í„°
import { connect } from "react-redux";
function Cart(props) {
  return (
    <div>
      // react bootstrap ìœ¼ë¡œ table í•˜ë‚˜ ìƒì„±í•¨
      <Table>
        <tr>
          <th>#</th>
          <th>ìƒí’ˆëª…</th>
          <th>ìˆ˜ëŸ‰</th>
          <th>ë³€ê²½</th>
        </tr>
        <tr>
          <td>1</td>
          // ì•„ë˜ì™€ ê°™ì´ state ë¥¼ props í™” ì‹œì¼œì„œ ì›í•˜ëŠ” data ë¥¼ ë°”ì¸ë”©í•´ì„œ ì“¸ ìˆ˜
          ìˆìŒ
          <td>{props.state[0].name}</td>
          <td>Table cell</td>
          <td>Table cell</td>
        </tr>
      </Table>
    </div>
  );
}

// state ë¥¼ props í™” í•´ì„œ ì“°ëŠ”ê²ƒ
let storeData = (state) => {
  return {
    state,
  };
};

// ì´ê±°ëŠ” connect ë¥¼ ì‚¬ìš©í•´ì„œ store ì— ì—°ê²° ì‹œí‚¤ê³  ì´ê±°ëŠ” íŒ¨í„´ì´ë‹ˆ ì˜ ì•Œì•„ë‘¬ì•¼ í•¨
export default connect(storeData)(Cart);
```

### 1-3.setting ìš”ì•½

**ì…‹íŒ…ì€**

1.index.jsì— <Provider>ë¥¼ import í•´ì˜¤ì‹  ë‹¤ìŒ

2.state ê°’ê³µìœ ë¥¼ ì›í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ì‹¸ë©´ ë©ë‹ˆë‹¤.

3.createStoreë¥¼ import í•´ì˜¤ì‹  ë‹¤ìŒ ì‚¬ìš©ë²•ì— ì˜í•´ stateë¥¼ ë§Œë“¤ì–´ let storeë¼ëŠ” ë³€ìˆ˜ì— ì €ì¥í•©ë‹ˆë‹¤.

4.<Provider store={store}> ì´ë ‡ê²Œ storeë¥¼ ë“±ë¡í•˜ë©´

ì´ì œ Providerë¡œ ê°ì‹¼ ì»´í¬ë„ŒíŠ¸ëŠ” ì „ë¶€ storeì•ˆì— ìˆë˜ ê°’ì„ propsì—†ì´ ê³µìœ  ê°€ëŠ¥í•©ë‹ˆë‹¤.

**storeì•ˆì— ìˆë˜ state ì‚¬ìš©ì€**

ì›í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ íŒŒì¼ ê°€ì…”ì„œ

1.í•˜ë‹¨ì— function stateë¥¼propsí™”() ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ì£¼ê³  stateë¥¼ propsë¡œ ë“±ë¡í•©ë‹ˆë‹¤.

2.ê·¸ë¦¬ê³  ë˜ í•˜ë‹¨ì— export default connect(stateë¥¼propsí™”)(Cart);

ì´ë ‡ê²Œ ì‚¬ìš©í•˜ì‹œë©´ ì´ì œ ì•„ê¹Œ ë§Œë“¤ì–´ë‘” stateê°€ propsë¡œ ë“±ë¡ì´ ëœ ê²ƒì…ë‹ˆë‹¤.

**props.stateì´ë¦„** ì´ë ‡ê²Œ ì €ì¥ëœ stateë¥¼ ììœ ë¡­ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ì™€ ê°™ì´ í•œë²ˆ ì…‹íŒ…í•˜ê³  ì˜¤ë‚˜ë£Œëœ ëª¨ë“  component ëŠ” redux ë‚´ì—ì„œ state ë¥¼ ììœ ì§€ì¬ë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/28912774/126583353-09cfd9cf-9f6a-420b-bc0a-350f95ec3d92.png)

## 2.reducer,dispatch ë¡œ ë°ì´í„° ìˆ˜ì •í•˜ëŠ” ë²•

- redux ì—ì„  state ë°ì´í„°ì˜ ìˆ˜ì •ë°©ë²•ì„ ë¯¸ë¦¬ ì •ì˜í•©ë‹ˆë‹¤. : reducer

ì•„ë˜ ì˜ˆì œëŠ” ìˆ˜ëŸ‰ì„ + ë²„íŠ¼ ëˆ„ë¥´ë©´ ìˆ˜ëŸ‰ ì¦ê°€, - ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìˆ˜ëŸ‰ ê°ì†Œí•˜ëŠ” reducer ë§Œë“¤ê¸°

```js
// index.js

// state ì›ë³¸ ìë£Œ
const defaultState = [
  { id: 0, name: "niceshoe", quant: 2 },
  { id: 1, name: "niceshoe2", quant: 1 },
];

// state ìˆ˜ì •ì„ ìœ„í•œ reducer ìƒì„±
const reducer = (state = defaultState, action) => {
  if (action.type === "quanIncrease") {
    const copy = [...state]; // deep copy í•œ state ë§Œë“¤ì–´ì„œ
    copy[0].quant++; // ì²«ë²ˆì§¸ id ì—ì„œ ìˆ˜ëŸ‰ì´ ë°”ë€Œê²Œ ë§Œë“¤ê¸°
    return copy; // ë³€ê²½ëœ data ì¸ copy state return
  } else if (action.type === "quanDecrease") {
    const copy = [...state];
    copy[0].quant--;
    return copy;
  } else {
    // ë³€ê²½ëœê²ƒì´ ì—†ì„ê²½ìš° ê·¸ëƒ¥ state return
    return state;
  }
};

const store = createStore(reducer); // store ìƒì„±
```

ë°ì´í„° ìˆ˜ì •í•˜ê¸°

```js
// in cart.js

// ë²„íŠ¼ í´ë¦­ì‹œ, ìˆ˜ëŸ‰ì´ ì¦ê°€ë˜ê²Œ ë§Œë“¤ê¸° (dispatch ì‚¬ìš©í•´ì„œ store data ê°€ì ¸ì˜¤ê¸°)
<button onClick={() => { props.dispatch({ type: 'quanIncrease' }) }}>+</button>
<button onClick={() => {props.dispatch({type: 'quanDecrease'})}}>-</button>

let storeData = state => {
  return {
    state
  }
}

export default connect(storeData)(Cart);
```

## 3.state ì™€ reducer ê°€ ë” í•„ìš”í•  ê²½ìš°

- reducer ë¥¼ í•˜ë‚˜ ë” ë§Œë“¤ê²½ìš° combineReducers ë¥¼ í†µí•´ì„œ íŒŒì¼ì„ reducer ë“¤ì„ ë¬¶ì–´ ì¤˜ì•¼ í•¨

- ì˜ˆì œ alert ì°½ ë§Œë“¤ì–´ì„œ ë‹«ê¸° ë™ì‘ ë²„íŠ¼ ë§Œë“¤ê¸°

```js
// index.js

const defaultAlert = true;

const reducer2 = (state = defaultAlert, action) => {
  if (action.type === "alertClose") {
    state = false;
    return state;
  } else {
    return state;
  }
};

// ê¸°ì¡´ reducer ì™€ í•¨ê¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ combineReducers ì‚¬ìš©í•¨
const store = createStore(combineReducers({ reducer, reducer2 }));
```



ğŸ”¶ ğŸ”· ğŸ“Œ ğŸ”‘

## Reference

- React redux official site - [https://react-redux.js.org/tutorials/quick-start](https://react-redux.js.org/tutorials/quick-start){:target="\_blank"}

- coding apple - [https://online.codingapple.com/course/react-basic/](https://online.codingapple.com/course/react-basic/){:target="\_blank"}
