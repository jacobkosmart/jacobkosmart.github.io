---
title: "18.Constructure, Prototype, class (객체지향) - ES6"
excerpt: "JavaScript"

categories:
  - JavaScript

toc: true
toc_sticky: true
last_modified_at:
---

---

## Constructor

### Constructor 용도

- object 를 쉽게 복사 할 수 있을때 사용합니다.

```js
// constructure 생성 보통 생성 자 이름에 대문자를 사용해서 일반 함수와 다르다는것을 구분하기 위해 처음 글자를 대문자를 넣어서 사용함
function Student(name, age) {
  this.name = name; // this 는 새로 생성되는 object 를 뜻함
  this.age = age;
  this.sayHi = function () {
    console.log(`안녕하세요 ${this.name} 입니다` )
  }
}
// this.age =15 이렇게 새로 생성되는 object 에 값을 부여 가능

const student1 = new Student('Park', 30) // constructure 를 복사해서 뽑아 내는것
const student2 = new Student('Kim', 20) // constructure 를 복사해서 뽑아 내는것

console.log(student1)
console.log(student2)
student1.sayHi();
```

![image](https://user-images.githubusercontent.com/28912774/124207789-400e1300-db21-11eb-8e18-e8eb5b717608.png)


### Constructor 연습

🔷 쇼핑몰에서 쓸 상품데이터를 object 형태로 여러개 만들고 싶을경우 와 `tax()` 라는 함수가 실행 될때 10% 만큼 부가세가 출력 되게 만들고 싶을 경우의 consructure 생성

```js
function Product(name, price) {
  this.name = name, // 주로 책에서 this 생성자를 instance 라고 합니다
  this.price = price,
  this.tax = function () {
    console.log(this.price * 0.1)
  }
}

const product1 = new Product('shirts', '50000')
const product2 = new Product('pants', '60000')

console.log(product1)
console.log(product2)

product1.tax()
```

![image](https://user-images.githubusercontent.com/28912774/124208342-4e106380-db22-11eb-98b5-13622c599ac7.png)


- 위의 constructure 를 활용해서 여러 object 를 만드는 것을 상속 (inheritance) 라고 말함

## Prototype

- JS 에 만 있는 상속을 구형 할 수 있는 또 하나의 문법인 prototype 입니다

- protopype 은 **유전자** 라고 생각하면 됩니다.

- constructor 를 만들면 prototype 이라는 공간이 자동으로 생깁니다.

- prototype 에 값을 추가 하면 모든 자식들이 물려 받기가 가능합니다.

```js

function Product(name, price) {
  this.name = name,
  this.price = price,
  this.tax = function () {
    console.log(this.price * 0.1)
  }
}

const product1 = new Product('shirts', '50000')
const product2 = new Product('pants', '60000')

Product.prototype.color = 'red'; // 부모인 Product 에 color 라는 key 값을 등록을 하게 되면 그 constructor 를 사용하는 자식 object 들은 그것을 다 상속을 받습니다.

console.log(product1.color) // 위에 constructro 에 prototype 으로 유전자를 color 라는것을 썼기 때문에 color 값이 출력 할 수 있음

```
![image](https://user-images.githubusercontent.com/28912774/124209111-e65b1800-db23-11eb-9175-0bc00d58a1f1.png)


### Prototype 동작원리

- 위의 code 에서 `product1.color` 을 실행하게 되면 JS 의 해석은 다음 순서와 같습니다.

    - product1이 직접 color 을 가지고 있는가?

    - 있으면 출력하는데, 만약 없다고 하면 product1의 부모 유전자가 color 를 가지고 있는가? 를 검사 함

    - 부모 유전자에 있는게 color 가 있는 게 확인이 되면 그것을 출력함


### Prototype 내장 함수 동작

- 위의 code 에서 `product1.toString()` 인 JS 내장 함수를 사용하게 되면 을 JS 의 해석은 다음 순서와 같습니다.

    - product1 이 toStrin() 을 가지고 있는가?

    - 없다면 부모 유전자에는 있는가?

    - 없다면 부모의 부모 유전자에 있는가?


```js
product1.toString()


const arr = [1, 2, 3]; // 사용자 측면에서 arr 생성
const arr = new Array(1, 2, 3) // 실제 JS 가 내부적으로 array 가 만들어지는 방식임

const obj = { name : 'kim' };
const obj = new Object();

Array.prototype; // Array prototype 에 있는지 확인을 함

arr.sort(); // Array 에 prototype 이 포함되어 있는 것을 사용할 수 있음
```

🔑 그럼 prototype으로 상속시키는거랑 constructor로 상속시키는거랑 차이가 뭐죠?

- 자식들이 값을 직접 소유하게 만들고 싶으면 constructor로 상속시키시면 되고

- 부모만 가지고 있고 그걸 참조해서 쓰게 만들고 싶으면 prototype으로 상속시키면 됩니다?

- 보통은 그래서 상속할 수 있는 함수 같은 것들은 prototype으로 많이 만들어놓습니다. 


### Prototype 특징

#### 1.Prototype 은 함수에만 생성됩니다.

-  일반 object, array 이런거 만들어도 거기엔 prototype이 없습니다. 

- 그럼 일반 object 같은걸 상속하고 싶으면 어떻게 할까요?

    - constructor 함수를 만들던가.

    - Object.create() 를 만들어서 쓰던가.

    - class를 만들어 쓰면 됩니다.


#### 2.내 부모 유전자(부모의 prototype)을 검사하고 싶다면 __proto__

- 부모로부터 생성된 자식 object들은 `__proto__`라는 속성이 있습니다.

- 이걸 출력해보시면 부모의 prototype이 출력됩니다.

- 그래서 `__proto__`는 부모의 prototype과 같은 의미입니다. 

```js
function Student(){
  this.name = 'Kim';
  this.age = 15;
}
var student1 = new Student();

console.log(student1.__proto__);
console.log(Student.prototype);
```

#### 3.__proto__를 직접 등록하면 object 끼리 상속기능을 구현가능합니다.

```js
const parent = { name : 'Kim' };
const child = {};

child.__proto__ = parent; // child 에 parnet 에 등록해서 사용함
console.log(child.name); // Kim 출력

```

#### 4.콘솔창에 prototype 정보들이 항상 출력됩니다.

```js
function Students(){
  this.name = 'Kim';
  this.age = 15;
}
Students.prototype.gender = 'male';

let student1 = new Students();


console.log(student1)
```

![image](https://user-images.githubusercontent.com/28912774/124222259-59708880-db3c-11eb-9337-6c0c5d4a718c.png)


- 이렇게 쭉 내 부모의 부모까지 탐색할 수도 있습니다. 

- 탐색해보시면 모든 object 자료형의 조상은 Object() 라는 Student 이며 (일명 Object.prototype)

모든 array 자료형의 조상도 Object()입니다. (중간에 Array()라는 부모도 있고요)

모든 함수 자료형의 조상도 Object() 입니다.

**(그래서 자바스크립트는 모든게 다 Object라고 말하는 것입니다.)**


## Constructure, prototype 연습

## Q1. object 를 여러개 만들기

- student1,2,3 을 constructure 를 사용해서 출력하기

- constructure 안에 `sayHi()` 라는 함수를 실행해서 메세지 출력

```js
function Student(name, age) {
  this.name = name,
  this.age = age,
  this.sayHi = function () {
    console.log(`안녕 나는 ${this.name}이야`)
  }
}

const student1 = new Student('kim', 20)
const student2 = new Student('park', 21)
const student3 = new Student('Lee', 22)

console.log(student1)
console.log(student2)
console.log(student3)

student1.sayHi();
```

![image](https://user-images.githubusercontent.com/28912774/124222881-8ec9a600-db3d-11eb-8c56-4f61e72d7735.png)

## Q2. array 안에서 특정 숫자 제거하는 함수 만들기

- 모든 array 에 사용되고, array 내에 3이라는 값을 제거하는 함수를 만들어 보자

```js
let arr = [1, 2, 3]

Array.prototype.remove3 = function () { // remove3 이라는 array 내장함수 같이 prototype 형식으로 Array object 에 함수를 만들어서 넣기임
  for (let i = 0; i < this.length; i++){ // arr 길이 만큼 탐색 (0번 index 부터 니까 this.length 만큼만 반복)
    if (this[i] === 3) {
      this.splice(i, 1) // 만약 3을 발경하면 그자리 index 번호의 뒤에 1개를 splice 제거 해주는것임
    }
  }
}

arr.remove3()
console.log(arr) // 1, 2 가 출력 됨
```


🔶 🔷  📌 🔑

## Reference 

 - poiemaweb - [https://poiemaweb.com/js-object-oriented-programming](https://poiemaweb.com/js-object-oriented-programming){:target="\_blank"}  
