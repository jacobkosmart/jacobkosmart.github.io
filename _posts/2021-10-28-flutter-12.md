---
title: "Flutter App PlayStore App ë“±ë¡ ë°°í¬í•˜ê¸°"
excerpt: "flutter"

categories:
  - flutter

toc: true
toc_sticky: true
---

## Flutter App icon ì¶”ê°€ / ë³€ê²½

`flutter_launcher_icons` package ë¥¼ ì‚¬ìš©í•´ì„œ android ì™€ ios ë™ì‹œì— ì‰½ê²Œ ë“±ë¡, ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤

> [flutter_launcher_icons](https://pub.dev/packages/flutter_launcher_icons)

```dart
// in pubspec.yaml

dependencies:
flutter_launcher_icons: ^0.9.2

flutter_icons:
  // android í™˜ê²½ì—ì„œ icon ë“±ë¡
  android: "launcher_icon"
  // ios í™˜ê²½ì—ì„œ icon ë“±ë¡
  ios: true
  // logo image íŒŒì¼ ê²½ë¡œ ë“±ë¡
  image_path: "images/icon.png"

```

- package ì™€ ì„¤ì •ì„ ë§ˆì¹˜ê³  terminal ë¡œ ì´ë™í•´ì„œ icon ì ìš©ì„ ìœ„í•œ ëª…ë ¹ì–´ ì‹¤í–‰ í•©ë‹ˆë‹¤

```bash
flutter pub run flutter_launcher_icons:main
```

![flutter pub icon](https://user-images.githubusercontent.com/28912774/139191392-6babbe89-7759-42bf-b2fb-903b2f7fb3db.png)

- ìƒˆë¡œê³ íŒ€ì„ í•˜ê³  android ì—ë®¬ë ˆì´í„°ì— ë‹¤ìŒê³¼ ê°™ì´ ì ìš©ëœê²ƒì„ í™•ì¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/28912774/139194829-92a0595a-5b9e-429a-810e-9bade5450cf6.png)

## Flutter App ì´ë¦„ ë³€ê²½

### Android

- í”„ë¡œì íŠ¸ë‚´ì— android/app/src/main/AndroidManifest.xml ì„ open í•©ë‹ˆë‹¤

- `android:label=""` ì•ˆì— text ë¥¼ app ì´ë¦„ìœ¼ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤

### iOS

- ios/Runner/info.plist ì„ open í•©ë‹ˆë‹¤

- CFBundleName ì˜ key ê°’ì„ í•´ë‹¹ app ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤

```js
	<key>CFBundleName</key>
	<string>ì•ˆë…•ë‚ ì”¨</string>
```

![image](https://user-images.githubusercontent.com/28912774/139196008-1b7ac172-0a24-468a-9fbd-30e48938d92d.png)

## êµ¬ê¸€ í”Œë ˆì´ìŠ¤í„°ì–´ ë°°í¬ìš© APK ìƒì„±í•˜ê¸°

### Package ì´ë¦„ ë³€ê²½í•˜ê¸°

- í”„ë¡œì íŠ¸ë‚´ì— android/app/build.gradle íŒŒì¼ì„ open í•©ë‹ˆë‹¤

```gradle
defaultConfig {
    // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).
    applicationId "info.jacobko.wearther_app"
}
```

- applicationId ë¥¼ ë³€ê²½í•˜ë©´ ë˜ëŠ”ë° ë³´í†µ ì˜ˆ) com.íšŒì‚¬ì´ë¦„.ì•±ì´ë¦„ ì‹ì˜ í˜•íƒœë¡œ ì‘ì„±í•˜ëŠ”ë° ì£¼ì˜ ì ì€ íŒ¨í‚¤ì§€ ì´ë¦„ì€ í•œë²ˆ í”Œë ˆì´ ìŠ¤í„°ì–´ì— ì˜¬ë¦¬ë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì˜ ì„ íƒ í•´ì•¼ í•©ë‹ˆë‹¤

### App ë²„ì „í™•ì¸

- pubspec.yaml ì—ì„œ ë²„ì „ì„ ë³€ê²½í•´ì£¼ë©´ ë˜ëŠ”ë° ì²˜ìŒ app ì¶œì‹œë¼ë©´ default ê°’ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ” `1.0.0+1` ë§Œì•½ 1.0.0+1 ì¶œì‹œ í›„ ë²„ì „ ì—†ì€ 1.0.0+2 or 1.0.1.+2 ì´ëŸ°ì‹ìœ¼ë¡œ ì›í•˜ëŠ” ë²„ì „ ë¶€ë¶„ì— + ì²˜ë¦¬í•´ì£¼ë©´ ë©ë‹ˆë‹¤.

```yaml
version: 1.0.0+1
```

### ì•± ê¶Œí•œ ì²´í¬

- android/app/src/profile/AndroidManifest.xml íŒŒì¼ì„ open í—¤ì„œ ì•±ì—ì„œ ì‚¬ìš©í•  ê¶Œí•œì´ í•„ìš”í•œ ê²½ìš°ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

- ê¸°ë³¸ê°’ìœ¼ë¡œ internet ì ‘ì† ê¶Œí•œì´ ìˆê³  ì˜ˆì‹œë¡œ ì•ˆë…• ë‚ ì”¨ì—ì„œëŠ” ìœ„ì¹˜ê¶Œí•œì— ëŒ€í•œ ê¶Œí•œ ì„ manifest tag ì•ˆì— permission ê°’ì„ ì…ë ¥í•©ë‹ˆë‹¤

```xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="info.jacobko.weather_app">
    <!-- Flutter needs it to communicate with the running application
         to allow setting breakpoints, to provide hot reload, etc.
    -->
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
</manifest>

```

### ì•± ì„œëª…í•˜ê¸°

- í”Œë ˆì´ìŠ¤í„°ì–´ì— ì—…ë¡œë“œí•˜ê¸° ìœ„í•´ ê°œë°œìë¥¼ ì¸ì¦í•˜ê¸° ìœ„í•œ ì¸ì¦ì„ ìœ„í•´ keytool ì„ ì´ìš©í•´ì„œ í‚¤ ìŠ¤í† ì–´ ì„œëª…ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤

- ì°¸ê³ : PC ì— Java ì„¤ì¹˜ ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤

- ê¸°ì¡´ keystore ê°€ ìˆìœ¼ë©´ ë§Œë“¤ì§€ ì•Šê³  ê¸°ì¡´ê²ƒì„ ì‚¬ìš©í•´ë„ ë©ë‹ˆë‹¤

```bash
# for mac (keystore ë§Œë“¤ê¸°)
keytool -genkey -v -keystore ~/key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias key

# fo windows (keystore ë§Œë“¤ê¸°)
keytool -genkey -v -keystore c:/Users/USER_NAME/key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias key
```

- ì•”í˜¸, ì´ë¦„, ì¡°ì§, ì§€ì—­ëª… ì„ ì…ë ¥ í›„ì— ìµœì¢… ë§ëŠ”ì§€ ë¬¼ì–´ë³¼ë•Œ 'Y' ì„ ì…ë ¥í•©ë‹ˆë‹¤

![image](https://user-images.githubusercontent.com/28912774/139200593-29cb4230-b015-46aa-a1a2-fe7d34de3ffb.png)

- ì™„ë£Œë˜ë©´ /Users/ìœ ì €ëª… ê²½ë¡œì— `key.jks` íŒŒì¼ì´ ìƒì„±ë˜ë©´ ì´íŒŒì¼ì„ HDD ê³µê°„ì— ì˜ ë³´ê´€ í•˜ê³ , í”„ë¡œì íŠ¸ ë‚´ì— `android/app `ê²½ë¡œì— ë³µì‚¬í•©ë‹ˆë‹¤

### ì•± í‚¤ ìŠ¤í† ì–´ ì°¸ì¡°

- ë°°í¬ìš© ì•± ë¹Œë“œì‹œ ì°¸ì¡°í•˜ê¸° ìœ„í•´ `android/app` ê²½ë¡œì— key.properties íŒŒì¼ ìƒì„± í›„ ì•„ë˜ì˜ ë‚´ìš©ì„ ì…ë ¥ ì‹œí‚µë‹ˆë‹¤

- github ë‚˜ public ê²½ë¡œì— `key.properties` ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ì£¼ì˜ í•©ë‹ˆë‹¤ (.gitignore í™•ì¸)

```properties
storePassword=<í‚¤ìƒì„±ì‹œ ì…ë ¥í•œ ì•”í˜¸>
keyPassword=<í‚¤ìƒì„±ì‹œ ì…ë ¥í•œ ì•”í˜¸>
keyAlias=key
storeFile=./key.jks
```

### Gradle ì„œëª… êµ¬ì„±

- ì•±ì˜ ì„œëª…ì„ êµ¬ì„±í•˜ê¸° ìœ„í•´ `android/app/build.gradle` íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤

- Gradle ë¹Œë“œì‹œ `key.properties` íŒŒì¼ì„ ì°¸ì¡°í•˜ê¸° ìœ„í•´ Gradle ì—ì„œ android ë¸”ë¡ ì‚°ë‹¨ì— ì•„ë˜ ë‚´ìš©ì„ ì¶”ê°€í•©ë‹ˆë‹¤

```gradle
// í”ŒëŸ¬ê·¸ì¸ ìœ„, android ìœ„ì— keystoreProperties ë¥¼ ì¶”ê°€ í•©ë‹ˆë‹¤
// 'app/key.properties' ì‹¤ì œ properties ê²½ë¡œ ìœ„ì¹˜ í™•ì¸!!

def keystoreProperties = new Properties()
def keystorePropertiesFile = rootProject.file('app/key.properties')
if (keystorePropertiesFile.exists()) {
    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
}

apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply from: "$flutterRoot/packages/flutter_tools/gradle/flutter.gradle"

android {
```

- ì´í›„ android ìœ„ì— Gradle ì—ì„œ buildType ë¸”ë¡ ìƒë‹¨ì— singingConfigs ë¸”ë¡ì„ ì¶”ê°€í•©ë‹ˆë‹¤

```gradle

android {
  ....

    buildTypes {
      release {
          // TODO: Add your own signing config for the release build.
          // Signing with the debug keys for now, so `flutter run --release` works.
          signingConfig signingConfigs.debug
      }
  }
}

// ìœ„ì˜ default ë¡œ ë˜ì–´ ìˆëŠ” code ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½í•©ë‹ˆë‹¤

android {
  ....
     signingConfigs {
       release {
           keyAlias keystoreProperties['keyAlias']
           keyPassword keystoreProperties['keyPassword']
           storeFile file(keystoreProperties['storeFile'])
           storePassword keystoreProperties['storePassword']
       }
   }
   buildTypes {
       release {
           signingConfig signingConfigs.release
       }
   }
}
```

- ì´ì œ ì•±ì˜ release ë¹Œë“œì—ì„œ ìë™ìœ¼ë¡œ ì„œëª…ì´ ë  ê²ƒ ì…ë‹ˆë‹¤.

### í”„ë¡œê°€ë“œ í™œì„±í™”

- ì•±ì˜ ë‚œë…í™”ë¥¼ ìœ„í•´ í”„ë¡œê°€ë“œë¥¼ í™œì„±í•´ì•¼ í•©ë‹ˆë‹¤. APK íŒŒì¼ í¬ê¸°ë¥¼ ì¤„ì´ê³ ,ì½”ë“œë¥¼ ë””ì»´íŒŒì¼ ì‹œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì•Œ ìˆ˜ ì—†ë„ë¡ ë‚œë…í™”ë¥¼ ì§„í–‰ í•©ë‹ˆë‹¤

- `/android/app/proguard-rules.pro` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒê³¼ ê°™ì€ ê·œì¹™ì„ ì¶”ê°€ í•©ë‹ˆë‹¤

```pro
## Flutter wrapper
-keep class io.flutter.app.** { *; }
-keep class io.flutter.plugin.**  { *; }
-keep class io.flutter.util.**  { *; }
-keep class io.flutter.view.**  { *; }
-keep class io.flutter.**  { *; }
-keep class io.flutter.plugins.**  { *; }
-dontwarn io.flutter.embedding.**
```

- Gradle ë¹Œë“œ ì‹œ í”„ë¡œê°€ë“œ íŒŒì¼ ì°¸ì¡°ê°€ ê°€ëŠ¥í•˜ë„ë¡ `/android/app/build.gradle` íŒŒì¼ì—ì„œ `buildTypes` ë¸”ë¡ ë‚´ì— ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€ í•´ì„œ í”„ë¡œê°€ë“œë¥¼ ì‚¬ìš©í•œë‹¤ê³  ì„ ì–¸í•©ë‹ˆë‹¤.

```gradle
android {

    ...

    buildTypes {

        release {

            signingConfig signingConfigs.release

            minifyEnabled true
            useProguard true

            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'

        }
    }
}
```

## App Manifest ê²€í† í•˜ê¸°

- ì˜¬ë°”ë¥¸ ì•± ì„¤ì •ì„ ìœ„í•´ì„œ `/android/app/src/main` ì— ìˆëŠ” `AndroidManifest.xml` ì— ê°’ì„ check í•©ë‹ˆë‹¤

  - `application`: ì•±ì˜ ìµœì¢… ì´ë¦„ì„ ë°˜ì˜í•˜ê¸° ìœ„í•´ `android:label` ì´ ì˜ ì ìš©ë¬ëŠ”ì§€ í™•ì¸í•˜ê¸°

  - uses-`permission`: ì•±ì˜ ì‚¬ìš©ê¶Œí•œì´ í•„ìš”í•œ permission ë¶€ë¶„ì´ ì˜ ì ìš©ë¬ëŠ”ì§€ í™•ì¸í•˜ê¸°

## ë¹Œë“œ êµ¬ì„± ê²€í† í•˜ê¸°

- ì˜¬ë°”ë¥¸ ë¹Œë“œ êµ¬ì„±ì„ ìœ„í•´ `/android/app.build.gradle` ì˜ ê°’ì„ check í•©ë‹ˆë‹¤

  - `applicationId`: ê³ ìœ ì˜ ID ê°’ì´ ì˜ ì ìš© ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸°

  - `versionCode` & `versionName` : ë‚´ë¶€ ì•± ë²„ì „ ë²ˆí˜¸ë¥¼ ì§€ì •í•˜ê³ , ë¬¸ìì—´ í˜•íƒœë¡œ ëª…ì‹œí•˜ì„¸ìš”. pubspec.yaml íŒŒì¼ì— version ì†ì„±ì„ ì„¤ì •í•˜ì—¬ ë‚´ë¶€ ì•± ë²„ì „ ë²ˆí˜¸ë¥¼ ë¬¸ìì—´ í˜•íƒœë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  - `minSdkVersion` & `targetSdkVersion`: ìµœì†Œ API ë ˆë²¨ê³¼ ê°œë°œ ëŒ€ìƒ ë²„ì „ìœ¼ë¡œ ì§€ì •í•œ ì§€ì • API ë ˆë²¨ì„ ëª…ì‹œí•˜ê¸°

## ì•± ë²ˆë“¤ ë˜ëŠ” APK ë§Œë“¤ê¸°

- í”Œë ˆì´ìŠ¤í† ì–´ ê°œì‹œí• ë•Œ ë¦´ë¦¬ì¦ˆ ë°©ì‹ì´ 2ê°€ì§€ ìˆëŠ”ë° ì•± ë²ˆë“¤, APK ìƒì„± ë°©ì‹ì´ ìˆìŠµë‹ˆë‹¤. êµ¬ê¸€ ê°€ì´ë“œì—ì„œëŠ” ì•± ë˜ë“¤ ìƒì„±ì„ ì¶”ì²œí•˜ê³  ìˆìŠµë‹ˆë‹¤. (ì•± ë²ˆë“¤ ìƒì„± : ë²ˆë“¤ ë„êµ¬ì™€ êµ¬ê¸€í”Œë ˆì´ìŠ¤í† ì–´ í†µí•´ test ê°€ ê°€ëŠ¥í•˜ì§€ë§Œ, arm, x68 ì½”ë“œê°€ ëª¨ë‘ ì»´íŒŒì¼ ë˜ì„œ APK íŒŒì¼ì´ ë¬´ê±°ì›Œ ì§)

### ì•±ë²ˆë“¤ ìƒì„± ëª…ë ¹ì–´

```bash
flutter build appbundle
```

![image](https://user-images.githubusercontent.com/28912774/139208460-6544f0c4-6d65-444a-a684-44471db77f1d.png)

- `/build/app/outputs/bundle/release/app.aab` ê²½ë¡œì— aab íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤

### APK ë§Œë“¤ê¸°

```bash
flutter build apk --split-per-abi
```

![image](https://user-images.githubusercontent.com/28912774/139209108-bc517d86-71d6-4b37-8589-b993779fe53c.png)

- `build/app/outputs/flutter-apk/app-armeabi-v7a-release.apk` ê²½ë¡œì— apk íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤

## ë¹Œë“œ ëœ APP ì‹¤ì œ ìŠ¤ë§ˆíŠ¸í°ì—ì„œ APK ì„¤ì¹˜ ë° êµ¬ë™ í…ŒìŠ¤íŠ¸

- android device ë¥¼ ì—°ê²°í•œ í›„ì— `flutter install` ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì„œ store ì—…ë¡œë“œ ì „ì— App êµ¬ë™ test ë¥¼ ì§„í–‰ í•©ë‹ˆë‹¤

## ê°œë°œì ê³„ì • ê°€ì… ë° ë“±ë¡

- êµ¬ê¸€ í”Œë ˆì´ìŠ¤í„°ì–´ì— ê°œë°œì ê°œë°œì ê³„ì • ê°€ì… ë° $25 ê²°ì œê°€ í•„ìš”í•©ë‹ˆë‹¤

> (Google Play ê°œë°œì ê³„ì • ë“±ë¡)[https://support.google.com/googleplay/android-developer/answer/6112435]

---

ğŸ”¶ ğŸ”· ğŸ“Œ ğŸ”‘

## Reference

Android ì•± ì¶œì‹œ ì¤€ë¹„í•˜ê¸° - [https://flutter-ko.dev/docs/deployment/android](https://flutter-ko.dev/docs/deployment/android)

ìŠ¬ê¸°ë¡œìš´ ITìƒí™œ - [https://itwise.tistory.com/47?category=964549](https://itwise.tistory.com/47?category=964549)
