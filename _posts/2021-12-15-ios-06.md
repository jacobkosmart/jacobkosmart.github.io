---
title: "UIkit Basic 5 (UITabBarController, UICollectionView, NotificationCenter)"
excerpt: "UIkit Basic"

categories:
  - uikit

toc: true
toc_sticky: true
---

## UITabBar

ì•±ì—ì„œ ì„œë¡œ ë‹¤ë¥¸ í•˜ìœ„ì‘ì—…, ë·°, ëª¨ë“œ ì‚¬ì´ì˜ ì„ íƒì„ í•  ìˆ˜ ìˆë„ë¡, tabBar í•˜ë‚˜ í˜¹ì€ í•˜ë‚˜ ì´ìƒì˜ ë²„íŠ¼ì„ ë³´ì—¬ì£¼ëŠ” ì»¨íŠ¸ë¡¤ ì…ë‹ˆë‹¤ (`flutter ì˜ BottomNavigationBar ê¸°ëŠ¥ì„`)

![image](https://user-images.githubusercontent.com/28912774/146098492-941d9e28-b5fd-42a1-a262-6dcfa6f013b1.png)

## UITabController

ë‹¤ì¤‘ ì„ íƒ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ì»¨í…Œì´ë„ˆ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ, ì„ íƒì— ë”°ë¼ ì–´ë–¤ ìì‹  ë·° ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ê°€ ê²°ì •ë©ë‹ˆë‹¤

íƒ­ë°”ë¥¼ í´ë¦­í• ë•Œë§ˆë‹¤ body ë¶€ë¶„ì˜ ë‚´ìš©ì˜ page ë¥¼ ë³´ì—¬ì£¼ëŠ”ê²ƒì„ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•´ì„œ ë³€ê²½í•©ë‹ˆë‹¤

![image](https://user-images.githubusercontent.com/28912774/146098684-1dc49113-f2ca-41a2-ac2e-390a96e8a832.png)

## UICollectionView

ë°ì´í„° í•­ëª©ì˜ ì •ë ¬ëœ ì»¬ë ‰ì…˜ì„ ê´€ë¦¬í•˜ê³  ì»¤ìŠ¤í…€í•œ ë ˆì´ì•„ì›ƒì„ ì‚¬ìš©í•´ í‘œì‹œí•˜ëŠ” ê°ì²´ ì…ë‹ˆë‹¤

collectionView ëŠ” ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œë„ ê°€ëŠ¥í•˜ê³ , ìŠ¬ë¼ì´ë“œì™€ ê°™ì´ ë‹¤ì–‘í•œ í˜•íƒœë¡œ í‘œí˜„í•˜ëŠ”ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤

![image](https://user-images.githubusercontent.com/28912774/146099044-d40aa2ef-3faf-411c-9b4e-32a3454283ca.png)

#### ì˜ˆì œì½”ë“œ

```swift
	// ì €ì¥ëœ diaryList ë¥¼ FlowLayout() í™”ë©´ì— êµ¬í˜„
	private func configureCollectionView() {
		self.collectionView.collectionViewLayout = UICollectionViewFlowLayout()
		self.collectionView.contentInset = UIEdgeInsets(top: 10, left: 10, bottom: 10, right: 10)
		self.collectionView.delegate = self
		self.collectionView.dataSource = self
	}
```

### UICollectionViewLayout

ë ˆì´ì•„ì›ƒì˜ ê°ì²´ë¥¼ í†µí•´ CollectionView ì•„ì´í…œì„ ì‹œì‘ì  ìŠ¤íƒ€ì¼ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë·°ì˜ ìœ„ì¹˜ë¥¼ ê²°ì •í•˜ê³ , ì‹œì‘ì • ìƒíƒœì˜ ì •ë³´ë¥¼

### UICollectionViewFlowLayout

cell ì„ ì›í•˜ëŠ” í˜•íƒœë¡œ ì •ë ¬í•  ìˆ˜ ìˆëŠ”ë°, flowLayout cellì˜ ì„ í˜• ê²½ë¡œë¡œ ë°°ì¹˜ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìµœëŒ€í•œ í–‰ì˜ cell ì„ ê³„ì† ì±„ì›Œ ë„£ë‹¤ê°€ ë‹¤ ì°¨ê°œ ë˜ë©´ ìƒˆë¡œìš´ í–‰ì„ ë§Œë“¤ì–´ì„œ ë°°ì¹˜í•´ë‚˜ê°‘ë‹ˆë‹¤

![image](https://user-images.githubusercontent.com/28912774/146099531-4b9dfae0-34bf-4162-8e62-c4d3b70ffb9e.png)

#### ì˜ˆì œì½”ë“œ

```swift
// collectionView ì˜ layout êµ¬ì„±
extension ViewController: UICollectionViewDelegateFlowLayout {
	// sizeForItemAt: size ë¥¼ ì„¤ì •í•˜ëŠ” method í‘œì‹œí•  cell ì˜ ì‚¬ì´ì¦ˆë¥¼ CGSize ë¡œ ì •ì˜í•˜ê³ , return í•´ì£¼ë©´ ì„¤ì •í•œ size ëŒ€ë¡œ cell ì— í‘œì‹œë¨
	func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, sizeForItemAt indexPath: IndexPath) -> CGSize {
		// UIScreen.main.bounds.width ì— ì•„ì´í° ì‚¬ì´ì¦ˆ ë„ˆë¹„ì— ë§ê²Œ ì¡°ì ˆí•˜ê³  / 2 í•´ì„œ í•œ í™”ë©´ì— 2ê°œì˜ cell ì´ ë‚˜íƒ€ë‚˜ê²Œ í•˜ë©° -20 ì€ ì¢Œìš° ì—¬ë°± 10 ì˜ í•©ì¹œ ê°’ì´ 20ì„ ë¹¼ì¤˜ì•¼ ë¨
		return CGSize(width: (UIScreen.main.bounds.width / 2) - 20, height: 200)
	}
}
```

flowLayout ì„ ì‚¬ìš©í•˜ë©´ Grid ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆì§€ë§Œ, ë” ë‹¤ì–‘í•œ ëª¨ì–‘ìœ¼ë¡œë„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

#### FlowLayout ì˜ êµ¬ì„±ìš”ì†Œ

- Flow ë ˆì´ì•„ì›ƒ ê°ì²´ë¥¼ ì‘ì„±í•˜ê³  ì»¬ë ‰ì…˜ ë·°ì— ì´ë¥¼ í• ë‹¹í•©ë‹ˆë‹¤

- ì…€ì˜ width, height ì„ ì •í•©ë‹ˆë‹¤ (required) - ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´, cellì˜ ë„ˆë¹„ì™€ ë†’ì´ê°€ 0 ì´ë˜ì–´ ë‚´ìš©ì´ ë‚˜íƒ€ë‚˜ì§€ ì•Šê²Œ ë¨

- í•„ìš”í•œ ê²½ìš° ì…€ë“¤ ê°„ì˜ ì¢Œìš° ìµœì†Œ ê°„ê²©, ìœ„ì•„ë˜ ìµœì†Œ ê°„ê²©ì„ ì„¤ì •í•˜ë‹ˆë‹¤

- section ì— header ì™€ footer ê°€ ìˆë‹¤ë©´ ì´ê²ƒë“¤ì˜ í¬ê¸°ë¥¼ ì§€ì •í•©ë‹ˆë‹¤

- ë ˆì´ì•„ì›ƒì˜ ìŠ¤í¬ë¡¤ ë°©í–¥ì„ ì„¤ì •í•©ë‹ˆë‹¤

#### FlowLayout cell ì‚¬ì´ì˜ ê°„ê²©

FlowLayout ì€ cell ì‚¬ì´ì˜ ê°„ê²©ì„ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„¤ì •í•˜ëŠ” ê°„ê²©ì€ ìµœì†Œê°„ê²©ì„ ë°°ì¹˜í•˜ëŠ”ê²ƒì— ë”°ë¼ ì§€ì •í•œ ê°’ë³´ë‹¤ ì„¤ì •í•œ ê°’ì´ í´ ìˆ˜ ë„ ìˆìŒë‹ˆë‹¤.

ë§Œì•½ cell ë“¤ì˜ í¬ê¸°ê°€ ê°™ê²Œ ë˜ë©´ ìµœì†Œë¡œ ì„¤ì •í•œ ê°„ê²©ì„ ì§€í‚¬ ìˆ˜ ìˆì§€ë§Œ, cell ë“¤ì˜ í¬ê¸°ê°€ ì œê°ê° ë‹¤ë¥´ê²Œ ë˜ë©´ ì‹¤ì œ ê°„ê²©ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŒì— ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤

![image](https://user-images.githubusercontent.com/28912774/146099950-7025c5b1-eec6-42ac-9a65-84f29d55c1bd.png)

í–‰ê³¼ì˜ ê°„ê²© ì´ì™¸ì—ë„, section ìì²´ì˜ ê³µê°„ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (margin ê°™ì€ ê°œë…)

![image](https://user-images.githubusercontent.com/28912774/146100223-cd7d3a24-7c70-474f-9201-d360431d64a1.png)

### UICollectionViewDataSource

ì»¬ë Œì…˜ ë·°ë¡œ ë³´ì—¬ì§€ëŠ” ì½˜í…ì¸ ë“¤ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´ì…ë‹ˆë‹¤. DataSource ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” UICollectionView ì˜ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•´ì•¼ í•˜ë©°, dataSource ì˜ ì—­í™œì„ collectionView ì— ëª‡ê°œì˜ sectionView ê°€ ìˆëŠ”ì§€ íŠ¹ì • cell ì— ëª‡ê°œì˜ ì…€ì´ ìˆëŠ”ì§€ ì…€ì— contents ë¥¼ ë³´ì—¬ ì£¼ê¸° ìœ„í•´ collectionView ì— ì¬ê³µí•˜ê²Œ ë©ë‹ˆë‹¤

```swift
public protocol UICollectionViewDataSource: NSObjectProtocol {
	// ì§€ì •ëœ ì„¹ì…˜ì— í‘œì‹œë¼ ì…€ì˜ ê°œìˆ˜ë¥¼ ë¬»ëŠ” ë©”ì„œë“œ : numberOfItemsInSection
	func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -> Int

	// ì»¬ë ‰ì…˜ë·°ì˜ ì§€ì •ëœ ìœ„ì¹˜ì— í‘œì‹œí•  ì…€ì„ ìš”ì²­í•˜ëŠ” ë©”ì„œë“œ : cellForItemAt
	func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell

	// ì„¹ì…˜ì˜ ê°œìˆ˜ë¥¼ ë¬»ëŠ” ë©”ì„œë“œ : numberOfSections
	optional func numberOfSections(in collectionView: UICollectionView) -> Int
}

```

### UICollectionViewDelegate

contents ì˜ í‘œí˜„, ì‚¬ìš©ìì˜ ìƒí˜¸ì‘ìš©ê³¼ ê´€ë ¨ëœ ê²ƒë“¤ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´ ì…ë‹ˆë‹¤

- collectionView ì™€ ê´€ë ¨ëœ í•µì‹¬ ê°ì²´ë“¤ì˜ ê´€ê³„

![image](https://user-images.githubusercontent.com/28912774/146103097-993f7954-e8c7-43b7-928b-0f416e12b8dd.png)

```swift
// diary í™”ë©´ì—ì„œ ì¼ê¸°ë¥¼ ì„ íƒí•˜ì˜€ì„ë•Œ ì¼ê¸° ìƒì„¸í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ê³ , ì¼ê¸° ìƒì„¸ ë‚´ìš©ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
extension ViewController: UICollectionViewDelegate {
	// íŠ¹ì • cell ì´ ì„ íƒ ë˜ì—ˆìŒì„ ì•Œë¦¬ëŠ” cell ì„
	func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) {
		guard let viewController = self.storyboard?.instantiateViewController(identifier: "DiaryDetailViewController") as? DiaryDetailViewController else { return }
		let diary = self.diaryList[indexPath.row]
		viewController.diary = diary
		viewController.indexPath = indexPath
		// Notification Center ë¡œ ëŒ€ì²´
		// viewController.delegate = self
		self.navigationController?.pushViewController(viewController, animated: true)
	}
}

```

### NotificationCenter

ë“±ë¡ëœ event ê°€ ë°œìƒí•˜ë©´, í•´ë‹¹ event ë“¤ì˜ í–‰ë™ì„ ì·¨í•˜ëŠ”ê²ƒì¸ë°, ì•± ë‚´ì—ì„œ ì–´ëŠê³³ì—ì„œë‚˜ ë©”ì„¸ì§€ë¥¼ ë˜ì§€ë©´, app ë‚´ ì•„ë¬´ê³³ì—ì„œë‚˜ ë©”ì„¸ì§€ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” ì—­í™œì…ë‹ˆë‹¤.

#### ì˜ˆì œ ì½”ë“œ

- NotificationCenter post event ìƒì„±

```swift

	// .edit ì¼ ê²½ìš°ì—ë§Œ NotificationCenter post event ë°œìƒ
		switch self.diaryEditorMode {
		case .new:
			let diary = Diary(
				uuidString: UUID().uuidString,
				title: title,
				contents: contents,
				date: date,
				isHeart: false)
			self.delegate?.didSelectReigster(diary: diary)

		case let .edit(indexPath, diary):
			let diary = Diary(
				uuidString: diary.uuidString,
				title: title,
				contents: contents,
				date: date,
				isHeart: diary.isHeart)
			NotificationCenter.default.post(
				name: NSNotification.Name("editDiary"),
				object: diary,
				userInfo: nil
			)
				// ë”ì´ìƒ userInfo ì— indexPath.row ê°’ì„ ë„˜ê²¨ì£¼ì§€ ì•Šì•„ë„ ë¨ uuid ì‚¬ìš©
				// userInfo: ["indexPath.row" : indexPath.row])
		}

		self.navigationController?.popViewController(animated: true)
	}
```

- NotificationCenter observer ìƒì„±

```swift
	override func viewDidLoad() {
		super.viewDidLoad()
		self.configureCollectionView()
		self.loadDiaryList()
		// NotificationCenter editDiaryNotification observer
		NotificationCenter.default.addObserver(
			self,
			selector: #selector(editDiaryNotification(_:)),
			name: NSNotification.Name("editDiary"),
			object: nil
		)
		// NotificationCenter isHeart observer
		NotificationCenter.default.addObserver(
			self,
			selector: #selector(heartDiaryNotification(_:)),
			name: NSNotification.Name("heartDiary"),
			object: nil
		)
		// NotificationCenter deleteDiary observer
		NotificationCenter.default.addObserver(
			self,
			selector: #selector(deleteDiaryNotification(_:)),
			name: NSNotification.Name("deleteDiary"),
			object: nil
		)
	}

// select ìƒì„±ì„ í•´ì¤˜ì•¼ í•¨

// Notification editDiary observer selector
	@objc func editDiaryNotification(_ notification: Notification) {
		guard let diary = notification.object as? Diary else { return }
		// ë°°ì—´ì„ iteration í•´ì„œ ì „ë‹¬ ë°›ì€ uuid ì™€ ê°™ì€ ê°’ì´ ë°°ì—´ì˜ ìš”ì†Œì— ìˆëŠ”ì§€ í™•ì¸í•˜ê¸°, ìˆìœ¼ë©´ í•´ë‹¹ ìš”ì†Œì˜ indexë¥¼ return ë°›ê¸°
		guard let index = self.diaryList.firstIndex(where: { $0.uuidString == diary.uuidString }) else { return }
		self.diaryList[index] = diary
		self.diaryList = self.diaryList.sorted(by: {
			$0.date.compare($1.date) == .orderedDescending
		})
		self.collectionView.reloadData()
	}

	// Notification isHeart observer selector
	@objc func heartDiaryNotification(_ notification: Notification) {
		guard let heartDiary = notification.object as? [String: Any] else { return }
		guard let isHeart = heartDiary["isHeart"] as? Bool else { return }
		guard let uuidString = heartDiary["uuidString"] as? String else { return }
		guard let index = self.diaryList.firstIndex(where: { $0.uuidString == uuidString }) else { return }
		self.diaryList[index].isHeart = isHeart
	}

	// Notification deleteDiary observer selector
	@objc func deleteDiaryNotification(_ notification: Notification) {
		guard let uuidString = notification.object as? String else { return }
		guard let index = self.diaryList.firstIndex(where: { $0.uuidString == uuidString }) else { return }
		self.diaryList.remove(at: index)
		self.collectionView.deleteItems(at: [IndexPath(row: index, section: 0)])
	}
```

---

ğŸ”¶ ğŸ”· ğŸ“Œ ğŸ”‘

## reference

diary-ios-practice code - [https://github.com/jacobkosmart/diary-ios-practice](https://github.com/jacobkosmart/diary-ios-practice)

ê¹€ì¢…ê¶Œì˜ iOS ì•± ê°œë°œ ì•Œì•„ê°€ê¸° - [https://ios-development.tistory.com/103](https://ios-development.tistory.com/103)

fastcampus - [https://fastcampus.co.kr/dev_online_iosappfinal](https://fastcampus.co.kr/dev_online_iosappfinal)
