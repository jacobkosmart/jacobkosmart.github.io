---
title: "13.Custom Hooks"
excerpt: "react"

categories:
  - react

toc: true
toc_sticky: true
---

---

ì›¹ ì‚¬ì´íŠ¸ì—ì„œ ìì£¼ ì‘ë™í•˜ëŠ” ê¸°ëŠ¥ë“¤ì„ custom hooks ë¡œ ì œì‘í•˜ì—¬ yarn, npm ì„¤ì¹˜ê°€ ê°€ëŠ¥í•˜ë„ë¡ publish í•˜ì˜€ìŠµë‹ˆë‹¤.

> [jacob-hooks document](https://github.com/jacobkosmart/custom-hooks)

| Hook            | Description                                                                                                     | Documentation                                                                                             | NPM Page                                                                                   | Yarn Page                                                               |
| --------------- | --------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------- |
| useTitle        | Update your document's title.                                                                                   | [Documentation](https://github.com/jacobkosmart/custom-hooks/tree/master/src/customHooks/useTitle)        | [NPM Page](https://www.npmjs.com/package/@jacob-hooks/use-title)                           | [yarn Page](https://yarnpkg.com/package/@jacob-hooks/use-title)         |
| useScroll       | React Hook to get X/Y coordinates of current position of the scroll.                                            | [Documentation](https://github.com/jacobkosmart/custom-hooks/tree/master/src/customHooks/useScroll)       | [NPM Page](https://www.npmjs.com/package/@jacob-hooks/use-scroll)                          | [yarn Page](https://yarnpkg.com/package/@jacob-hooks/use-scroll)        |
| usePreventLeave | React Hook to prompt the user for confirmation before leaving the page. Useful when changes haven't been saved. | [Documentation](https://github.com/jacobkosmart/custom-hooks/tree/master/src/customHooks/usePreventLeave) | [NPM Page](https://www.npmjs.com/package/@jacob-hooks/use-prevent-leave?activeTab=explore) | [yarn Page](https://yarnpkg.com/package/@jacob-hooks/use-prevent-leave) |
| useNetwork      | React Hook to listen when the user goes online or offline.                                                      | [Documentation](https://github.com/jacobkosmart/custom-hooks/tree/master/src/customHooks/useNetwork)      | [NPM Page](https://www.npmjs.com/package/@jacob-hooks/use-network)                         | [yarn Page](https://www.npmjs.com/package/@jacob-hooks/use-network)     |
| useInput        | React Hook to update input event                                                                                | [Documentation](https://github.com/jacobkosmart/custom-hooks/tree/master/src/customHooks/useInput)        | [NPM Page](https://www.npmjs.com/package/@jacob-hooks/use-input)                           | [yarn Page](https://yarnpkg.com/package/@jacob-hooks/use-input)         |
| useHover        | React Hook to detect a hover on an any React Element                                                            | [Documentation](https://github.com/jacobkosmart/custom-hooks/tree/master/src/customHooks/useHover)        | [NPM Page](https://www.npmjs.com/package/@jacob-hooks/use-hover)                           | [yarn Page](https://yarnpkg.com/package/@jacob-hooks/use-hover)         |
| useFadeIn       | React Hook to fade in any element.                                                                              | [Documentation](https://github.com/jacobkosmart/custom-hooks/tree/master/src/customHooks/useFadeIn)       | [NPM Page](https://www.npmjs.com/package/@jacob-hooks/use-fade-in)                         | [yarn Page](https://yarnpkg.com/package/@jacob-hooks/use-fade-in)       |
| useConfirm      | React Hook to ask the user for a confirmation before executing a function.                                      | [Documentation](https://github.com/jacobkosmart/custom-hooks/tree/master/src/customHooks/useConfirm)      | [NPM Page](https://www.npmjs.com/package/@jacob-hooks/use-confirm)                         | [yarn Page](https://yarnpkg.com/package/@jacob-hooks/use-fade-in)       |
| useClick        | React Hook to execute a function when the mouse click then add event listener                                   | [Documentation](https://github.com/jacobkosmart/custom-hooks/tree/master/src/customHooks/useClick)        | [NPM Page](https://www.npmjs.com/package/@jacob-hooks/use-click)                           | [yarn Page](https://yarnpkg.com/package/@jacob-hooks/use-click)         |
| useBeforeLeave  | React Hook to execute a function when the mouse leaves the page. Useful to show a popup or for analytics.       | [Documentation](https://github.com/jacobkosmart/custom-hooks/tree/master/src/customHooks/useBeforeLeave)  | [NPM Page](https://www.npmjs.com/package/@jacob-hooks/use-before-leave)                    | [yarn Page](https://yarnpkg.com/package/@jacob-hooks/use-before-leave)  |
| useAxios        | React Hook to send HTTP request and get data from URL                                                           | [Documentation](https://github.com/jacobkosmart/custom-hooks/tree/master/src/customHooks/useAxios)        | [NPM Page](https://www.npmjs.com/package/@jacob-hooks/use-axios)                           | [yarn Page](https://yarnpkg.com/package/@jacob-hooks/use-axios)         |

## 1.useTitle

- ì¸í„°ë„· ë¸Œë¼ìš°ì € ì°½ ìœ„ì— Title ì„ ë³€ê²½í•˜ëŠ” hooks

- HTML Title ì´ Loading... ì´ë¼ê³  mount ë ë•Œ ì‹¤í–‰ë˜ê³  5ì´ˆ í›„ì— Home ìœ¼ë¡œ ë³€ê²½ ì‹œí‚¤ëŠ” useTitle ì´ìš© ì˜ˆì‹œ

```js
import React, { useEffect, useState } from "react";
import "./App.css";

// useTitle
const useTitle = (initialTitle) => {
  const [title, setTitle] = useState(initialTitle);
  const updateTitle = () => {
    const htmlTitle = document.querySelector("title");
    htmlTitle.innerText = title;
  };
  useEffect(updateTitle, [title]);
  return setTitle;
};

const App = () => {
  const titleUpdate = useTitle("Loading...");
  setTimeout(() => titleUpdate("Home"), 5000);
  return (
    <div className="App">
      <h1>Hello</h1>
    </div>
  );
};

export default App;
```

## 2.useScroll

- ìœ ì €ê°€ ìŠ¤í¬ë¡¤ í•´ì„œ ë¬´ì–¸ê°€ë¥¼ ì§€ë‚˜ê°ˆë•Œ ìƒ‰ìƒì„ ë°”ê¾¸ê±°ë‚˜ ë¬´ì–¸ê°€ë¥¼ í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ ì£¼ëŠ” hooks

```js
// useScroll

const useScroll = () => {
  const [state, setState] = useState({
    x: 0,
    y: 0,
  });
  const onScroll = () => {
    setState({ y: window.scrollY, x: window.scrollX });
  };
  useEffect(() => {
    window.addEventListener("scroll", onScroll);
    // cleanUp
    return () => window.removeEventListener("scroll", onScroll);
  }, []);
  return state;
};

const App = () => {
  const { y } = useScroll();

  return (
    <div className="App" style={{ height: "1000vh" }}>
      <h1 style={{ position: "fixed", color: y > 100 ? "red" : "blue" }}>
        Hello
      </h1>
    </div>
  );
};

export default App;
```

## 3.usePreventLeave

- ë³´í†µ ì›¹ì‚¬ì´íŠ¸ì—ì„œ ë§Œì•½ window ì°½ì„ ë‹«ì„ë•Œ "ì•„ì§ ì €ì¥ ë˜ì§€ ì•Šì•˜ì–´!" ë¼ê³  ë©”ì„¸ì§€ë¥¼ ë³´ë‚¸ë•Œ ì‚¬ìš©ë˜ëŠ” hooks

- ë˜ëŠ” API ì— ìš”ì²­ì„ ë³´ëƒˆëŠ”ë° ë„¤íŠ¸ì›Œí¬ ì†ë„ê°€ ëŠë ¤ì„œ ì•„ì§ data ê°€ ë‹¤ ë„˜ì–´ ì˜¤ì§€ ì•Šì•˜ëŠ”ë° user ê°€ ì°½ì„ ë‹«ê±°ë‚˜ ì‘ì—…ì„ ì¤‘ë‹¨ ì‹œí‚¤ë ¤ê³  í• ë•Œ ì‘ì—…ì´ ë‹¤ ëë‚˜ì§€ ì•Šì•˜ë‹¤ë¡œ ì•Œë¦¬ëŠ” message

```js
const usePreventLeave = () => {
  const listener = (e) => {
    e.preventDefault();
    e.returnValue = "";
  };
  const enablePrevent = () => window.addEventListener("beforeunload", listener);
  const disenablePrevent = () =>
    window.removeEventListener("beforeunload", listener);

  return { enablePrevent, disenablePrevent };
};

const App = () => {
  const { enablePrevent, disenablePrevent } = usePreventLeave();
  return (
    <div className="App">
      <h1>Hello</h1>
      <button onClick={enablePrevent}>Protect</button>
      <button onClick={disenablePrevent}>Unprotected</button>
    </div>
  );
};

export default App;
```

## 4.useNetwork

- useNetwork ëŠ” offline ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ë¡œ ë³€ê²½í• ë•Œ ë©”ì„¸ì§€ë¥¼ í˜¸ì¶œí•˜ëŠ” hooks

```js
const useNetwork = (onChange) => {
  const [status, setStatus] = useState(navigator.onLine);

  const handleChange = () => {
    if (typeof onChange === "function") {
      onChange(navigator.onLine);
    }
    setStatus(navigator.onLine);
  };

  useEffect(() => {
    window.addEventListener("online", handleChange);
    window.addEventListener("offline", handleChange);
    // clean Up
    return () => {
      window.removeEventListener("online", handleChange);
      window.removeEventListener("offline", handleChange);
    };
  }, []);

  return status;
};

const App = () => {
  const handleNetworkChange = (online) => {
    console.log(online ? "We are in onLine" : "OffLine check network");
  };
  const OnLine = useNetwork(handleNetworkChange);
  return (
    <div className="App">
      <h1>{OnLine ? "Online" : "Offline"}</h1>
    </div>
  );
};

export default App;
```

### 5.useInput

- ê¸°ë³¸ì ìœ¼ë¡œ input ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” hooks

- initialValue, validator ë¥¼ parameter ë¥¼ ë°›ì•„ì„œ input ì°½ì—ì„œ 10ê°œ ì´ìƒì˜ ê¸€ìë¥¼ ì“¸ ìˆ˜ ì—†ê²Œ í•˜ëŠ” custom hooks

```js
// useInput

const useInput = (initialValue, validator) => {
  const [value, setValue] = useState(initialValue);
  const onChange = (e) => {
    const {
      target: { value },
    } = e;
    let willUpdate = true;
    if (validator) {
      willUpdate = validator(value);
    }
    if (willUpdate) {
      setValue(value);
    }
  };
  return { value, onChange };
};

const App = () => {
  const maxLen = (value) => value.length <= 10;
  const name = useInput("Mr.", maxLen);

  return (
    <div className="App">
      <h1>Hello</h1>
      <input placeholder="Name" {...name} />
    </div>
  );
};
```

## 6.useHover

- ë§ˆìš°ìŠ¤ë¥¼ ëŒ€ìƒì— ì˜¬ë ¤ ë†“ê²Œ ë˜ë©´ event ê°€ ì‹¤í–‰í•˜ëŠ” hooks

```js
// useClick
const useHover = (onHover) => {
  const element = useRef();
  useEffect(() => {
    if (element.current) {
      element.current.addEventListener("mouseenter", onHover);
    }
    // cleanUP
    return () => {
      if (element.current) {
        element.current.addEventListener("mouseenter", onHover);
      }
    };
  }, []);

  if (typeof onHover !== "function") {
    return;
  }
  return element;
};

const App = () => {
  const sayHello = () => console.log("Say Hello");

  const hover = useHover(sayHello);

  return (
    <div className="App">
      <h1>Hello</h1>
      <button ref={hover}>í´ë¦­</button>
    </div>
  );
};

export default App;
```

## 7.useFadeIn

- ìš”ì†Œì— fade in íš¨ê³¼ë¥¼ ì£¼ëŠ” hooks

```js
// useFadeIn
const useFadeIn = (duration = 1, delay = 0) => {
  const element = useRef();

  useEffect(() => {
    if (element.current) {
      const { current } = element;
      current.style.transition = `opacity ${duration}s ease-in-out ${delay}s`;
      current.style.opacity = 1;
    }
  }, []);
  if (typeof duration !== "number" || typeof delay !== "number") {
    return;
  }
  return { ref: element, style: { opacity: 0 } };
};

const App = () => {
  const fadeInH1 = useFadeIn(1, 2);
  const fadeInP = useFadeIn(5, 3);
  return (
    <div className="App">
      <h1 {...fadeInH1}>Hello</h1>
      <p {...fadeInP}>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto
        aperiam minus accusamus ratione, necessitatibus sapiente! Ut mollitia at
        dolorum ea asperiores consectetur. Nostrum quo unde voluptates eveniet
        aliquam! Atque, dignissimos?
      </p>
    </div>
  );
};

export default App;
```

## 8.useConfirm

- ì‚¬ìš©ìê°€ ë¬´ì–¸ê°€ë¥¼ í•˜ê¸°ì „ì— í™•ì¸í•˜ëŠ”ê±´ë° ë§Œì•½ ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ëŠ” ì‘ì—…ì„ í•˜ë©´ (ì´ë²¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì—) ë©”ì„¸ì§€ë¥¼ ë³´ì—¬ì£¼ê³  ì‹¶ì€ê²ƒ (alert ì°½ì— ì •ë§ë¡œ ì‚­ì œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ê°™ì€ ê²ƒ)

```js
// useConfirm

const useConfirm = (message = "", onConfirm, onCancel) => {
  if (!onConfirm || typeof onConfirm !== "function") {
    return;
  }
  if (!onCancel || typeof onCancel !== "function") {
    return;
  }
  const confirmAction = () => {
    if (window.confirm(message)) {
      onConfirm();
    } else {
      onCancel();
    }
  };
  return confirmAction;
};

const App = () => {
  const deleteWorld = () => console.log("ë‹¨ì–´ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
  const abort = () => console.log("ì‚­ì œê°€ ì·¨ì†Œ ë˜ì—ˆìŠµë‹ˆë‹¤.");
  const confirmDelete = useConfirm(
    "ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
    deleteWorld,
    abort
  );
  return (
    <div className="App">
      <h1>Hello</h1>
      <button onClick={confirmDelete}>Click me</button>
    </div>
  );
};

export default App;
```

## 9.useClick

- ë§ˆìš°ìŠ¤ë¥¼ í´ë¦­í•˜ê²Œ ë˜ë©´ event ê°€ ì‹¤í–‰í•˜ëŠ” hooks

```js
const useClick = (onClick) => {
  const element = useRef();

  useEffect(() => {
    if (element.current) {
      // 'click' is keyword
      element.current.addEventListener("click", onClick);
    }
    //  CleanUp ComponentWillUnmount()
    return () => {
      if (element.current) {
        element.current.removeEventListener("click", onClick);
      }
    };
  }, [onClick]);

  if (typeof onClick !== "function") {
    return;
  }
  return element;
};

const App = () => {
  const sayHello = () => console.log("Say Hello");

  const title = useClick(sayHello);

  return (
    <div className="App">
      <h1 ref={title}>Hello</h1>
    </div>
  );
};
```

## 10.useBeforeLeave

- ê¸°ë³¸ì ìœ¼ë¡œ íƒ­ì„ ë‹«ì„ë•Œ ì‹¤í–‰ë˜ëŠ” function íŒì—…ì´ë‚˜ íŠ¹íˆ ë­”ê°€ë¥¼ ì¤‘ì§€ì‹œí‚¤ë ¤ê³  í• ë•Œ "ë‚˜ê°€ì§€ë§ˆìš”" ë¼ê³  ë¼ëŠ” function ì„ ì‚¬ìš©í•˜ëŠ” hooks

```js
// useBeforeLeave

const useBeforeLeave = (onBefore) => {
  const handle = (e) => {
    // clientY ë§ˆìš°ìŠ¤ì˜ y ì¶•ì˜ ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ 0 ë³´ë‹¤ ì‘ì€ê²½ìš° í•¨ìˆ˜ ì‹¤í–‰ (top ìœ„ì¹˜ì¼ë•Œ)
    const { clientY } = e;
    if (clientY <= 0) {
      onBefore();
    }
  };
  useEffect(() => {
    document.addEventListener("mouseleave", handle);
    // cleanUp
    return () => document.removeEventListener("mouseleave", handle);
  }, []);
  if (typeof onBefore !== "function") {
    return;
  }
};

const App = () => {
  const begForLife = () => console.log("Pls don't leave");
  useBeforeLeave(begForLife);
  return (
    <div className="App">
      <h1>Hello</h1>
    </div>
  );
};

export default App;
```

## 11.useAxios

- HTTP request ë¥¼ ë§Œë“œëŠ” hooks

```js
import React, { useEffect, useState } from "react";
import defaultAxios from "axios";
import "./App.css";

// useAxios

const useAxios = (opts, axiosInstance = defaultAxios) => {
  const [state, setState] = useState({
    loading: true,
    error: null,
    data: null,
  });
  const [trigger, setTrigger] = useState(0);
  const refetch = () => {
    setState({
      ...state,
      loading: true,
    });
    setTrigger(Date.now());
  };
  useEffect(() => {
    axiosInstance(opts)
      .then((data) => {
        setState({
          ...state,
          loading: false,
          data,
        });
      })
      .catch((error) => {
        setState({ ...state, loading: false, error });
      });
  }, [trigger]);

  if (!opts.url) {
    return;
  }

  return { ...state, refetch };
};

const App = () => {
  const { loading, data, refetch } = useAxios({
    url: "https://yts.mx/api/v2/list_movies.json",
  });
  return (
    <>
      <div className="App">
        <h1>{data && data.status}</h1>
        <h2>{loading && "Loading"}</h2>
        <button onClick={refetch}>Refetch</button>
      </div>
    </>
  );
};

export default App;
```

ğŸ”¶ ğŸ”· ğŸ“Œ ğŸ”‘

## Reference

- normad corder hooks - [https://nomadcoders.co/react-hooks-introduction/lobby](https://nomadcoders.co/react-hooks-introduction/lobby){:target="\_blank"}
