---
title: "UIkit Basic 6 ()"
excerpt: "UIkit Basic"

categories:
  - uikit

toc: true
toc_sticky: true
---

## 🕰 Timer-App

Timer 를 이용해서 25분간 집중하고, 5분간 휴식을 취하는 방식입니다

## 📌 기능 상세

- DatePicker 를 통해 타이머 시간을 설정할 수 있습니다

- 시작 버튼을 누르면 타이머가 시작되고 일시 정지를 누르면 타이머가 일시정지 됩니다

- 취소 버튼을 누르면 타이머가 종료됩니다

- 카운트 다운이 완료되면 알람이 울립니다

## 🔑 Check Point !

### 🔷 DispatchSourceTimer

- Timer: 특정시간이 지난 후에, event 를 발생 시킨다거나, 반복적인 주기로 특정작업을 수행하데 사용할 수 있음니다

- GCD(Grand Central Dispatch) : 작업을 병렬적으로 처리하기 위해 apple 이 재공하는 API 입니다. thread 를 만들거나, 관리해야되는 작업들을 보다 쉽게 제어 해줍니다. GCD 를 이용하면 만들어진 pool 에 task 들이 담겨 있는 queue 을 만들고, 그 queue 를 GCD 에 보내면, GCD 가 모든 thread 를 관리해 줍니다

> For more detail GCD in apple devDocs - https://developer.apple.com/documentation/DISPATCH

### 🔷 UIViewAnimation

#### 화면의 transition 효과 적용하기 (alpha 값 조절)

- View의 여부를 isHidden 값이 아닌, alpha 값으로 설정해서 View 가 사라지고 표시되게 만듭니다. alpha 값은 opacity 값을 조절하는 인자 입니다. 최소 0 ~ 1까지 설정하는데 0 에 가까울수록 view 가 투명해 집니다.

```swift

func stopTimer() {
	// .pause 상태 일경우에 resume method 생성되게 작성
	if self.timerStatus == .pause {
		self.timer?.resume()
	}
	self.timerStatus = .end
	self.cancelBtn.isEnabled = false
	// alpha 값 조절을 통한 animation
	UIView.animate(withDuration: 0.5, animations: {
		self.timerLabel.alpha = 0
		self.pregressView.alpha = 0
		self.datePicker.alpha = 1
	})

@IBAction func tabCancelBtn(_ sender: UIButton) {
	switch self.timerStatus {
		// start, paue 상태에서 cancelBtn 누르면 .end 상태로 놓고, cancelBtn 을 비활성화로 하고, timerLabel과 pregressView 가 표시되지 않게함, datePicker 가 다시 표시되게 함, toggleBtn이 strart 되게 함
	case .start, .pause:
		switch self.timerStatus {
			// end 일경우 아직 시작 안한상태 timer label 과 progressView 가 표시되게 하고, datePicker 가 hidden 되게 함
	case .end:
		self.currentSeconds = self.duration // 현재 시간을 duration 에 대입 시킴
		self.timerStatus = .start
		// alpha 값 조절을 통한 animation
		UIView.animate(withDuration: 0.5, animations: {
			self.timerLabel.alpha = 1
			self.pregressView.alpha = 1
			self.datePicker.alpha = 0
		})
```

![Kapture 2021-12-17 at 14 01 52](https://user-images.githubusercontent.com/28912774/146491720-a7d35e0f-7796-41c8-881a-29687cce3557.gif)

#### 고정되어 있는 image 의 회전 효과 animation

```swift
	// image rotation animation
	UIView.animate(withDuration: 0.5, delay: 0, animations: {
		// CGAffineTransform 은 구조체 인데, view 의 frame 을 계산하지 않고 2D 그래픽을 그릴 수 있습니다. (예를 들어 View를 이동 시키거나, 회전시키는 효과를 줄수 있습니다. rotationAngle: .pi 은 180도 회전을 의미합니다.
		self.imageView.transform = CGAffineTransform(rotationAngle: .pi)
	})
	// 다시 360도 회전 시킴 : 위에 180 도 회전 animation 이 끝나면 동작 할 수 있게 delay 0.5 설정
	UIView.animate(withDuration: 0.5, delay: 0.5, animations: {
		self.imageView.transform = CGAffineTransform(rotationAngle: .pi * 2)
	})

	self.imageView.transform = .identity // cancel 되면 imageView 가 원상태로 되게 함
```

![Kapture 2021-12-17 at 14 03 38](https://user-images.githubusercontent.com/28912774/146491833-56ba41f5-5cdc-4fa5-9652-9d604fe4dbb5.gif)

---

🔶 🔷 📌 🔑 👉

## 🗃 Reference

diary-ios-practice code - [https://github.com/jacobkosmart/timer-ios-practice.git](https://github.com/jacobkosmart/timer-ios-practice.git)

재:편집 개발블로그 - [https://dev-dream-world.tistory.com/133](https://dev-dream-world.tistory.com/133)

fastcampus - [https://fastcampus.co.kr/dev_online_iosappfinal](https://fastcampus.co.kr/dev_online_iosappfinal)
