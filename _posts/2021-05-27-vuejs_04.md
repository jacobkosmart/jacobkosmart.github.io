---
title: "04.Vue.js Composition API"
excerpt: "Vue.js"

categories:
  - Vue

toc: true
toc_sticky: true
last_modified_at:
---

---


## 1.Composition API ê°€ í•„ìš”í•œ ì´ìœ 

> [Composition API ìì„¸íˆ ë³´ê¸°..](https://v3.vuejs.org/guide/composition-api-introduction.html){:target="\_blank"}


- Compotision API ê°€ í•„ìš”í•œ ê²½ìš° code

```
<template>
  <h1 @click="increase">
    {{ count }} / {{ doubleCount }}
  </h1>
  <h1>
    {{ message }} / {{ reversedMessage }}
  </h1>
</template>

<script>
export default { 
  data() { // 1,2ë²ˆ logic ì´ ë™ì‹œì— ì‚¬ìš©ë˜ëŠ”ë°, ë§Œì•½ ì´ë³´ë‹¤ ë³µì¡í•œ logic ê³¼ ê·¸ ì°¸ì¡°í•˜ëŠ”ê²ƒë“¤ì´ ì—¬ê¸°ì €ê¸° ì„ì´ê²Œ ë˜ë©´ ì½”ë“œë¥¼ í•´ì„ í•˜ëŠ” ë° ì–´ë ¤ì›€..
    return {
      message: 'Hello world!', // 1ë²ˆ logic
      count: 0 // 2ë²ˆ logic
    }
  },
  computed: {
    doubleCount() { //2ë²ˆ logic ì°¸ì¡°
      return this.count * 2
    },
    reversedMessage() { // 1ë²ˆ logic ì°¸ì¡°
      return this.message.split('').reverse().join('')
    }
  },
  methods: {
    increase() { // 2ë²ˆ logic ì°¸ì¡°
      this.count += 1
    }
  }
}
</script>
```

- ì¦‰, 1,2ë²ˆ logic ì„ ì—¬ëŸ¬ë²” ì°¸ì¡°í•˜ê³  ì½”ë“œê°€ ë³µì¡í•´ì§€ë©´ ì½”ë“œë¥¼ ì´í•´í•˜ê³  í•´ì„í•˜ëŠ”ë° ì–´ë ¤ì›€ì´ ìˆê¸° ë•Œë¬¸ì— Composition API ë¥¼ í†µí•´ì„œ ê°„ì†Œí™”, ì§ê´€ì ìœ¼ë¡œ code ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
<template>
  <h1 @click="increase">
    {{ count }} / {{ doubleCount }}
  </h1>
  <h1>
    {{ message }} / {{ reversedMessage }}
  </h1>
</template>

<script>
import { ref, computed } from 'vue'

export default {
  setup() {
    const message = ref('Hello World') // 1ë²ˆ logic ì„ ëª¨ì•„ì„œ ê´€ë ¨ëœ method ì™€ computed ë¥¼ ëª¨ì•„ì„œ ì‚¬ìš©
    const reversedMessage = computed(() => {
      return message.value.split('').reverse().join('')
    })

    const count = ref(0) // 2ë²ˆ logic ì„ ëª¨ì•„ì„œ ê´€ë ¨ëœ method ì™€ computed ë¥¼ ëª¨ì•„ì„œ ì‚¬ìš©
    const doubleCount = computed(() => count.value * 2)
    function increase() {
      count.value += 1
    }
    
    return { // ì •ë¦¬ëœ ë‚´ì˜ì„ í•œë²ˆì— ë°˜í™˜ í•´ì¤Œ
      message,
      reversedMessage,
      count,
      doubleCount,
      increase
    }
  }
}
</script>
```

## 2.ë°˜ì‘í˜• ë°ì´í„°(ë°˜ì‘ì„±)

- ì½”ë“œë¥¼ ìµœì í•˜ê¸° ìœ„í•´ì„œ setup() ì´ë¼ëŠ” í•¨ìˆ˜ì•ˆì— Composition API ë¥¼ ë§Œë“¤ì–´ì„œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ setup() ì•ˆì˜ í•¨ìˆ˜ëŠ” ê¸°ë³¸ì ì¸ ë³€ìˆ˜ëŠ” ë°˜ì‘ì„±ì„ ê°€ì§€ì§€ ì•Šê¸° ë•Œë¬¸ì— í™”ë©´ì— ì¶œë ¥ì´ ì•ˆë©ë‹ˆë‹¤

- ê·¸ë˜ì„œ vue ë¼ëŠ” package ì—ì„œ ref ë¼ëŠ” ê¸°ëŠ¥ì„ ê°€ì ¸ ì™€ì„œ í•¨ìˆ˜ ì²˜ëŸ¼ ì‹¤í–‰í•˜ë©´, ê·¸ í•¨ìˆ˜ì—ì„œ ë°˜ì‘ì„±ì„ ê°€ì§€ê³  ìˆëŠ” ê°ì²´ ë°ì´í„°ë¥¼ return í•˜ê²Œ ë˜ê³ , ê°ì²´ ë°ì´í„° ë‚´ë¶€ì˜ value ë¼ëŠ” ì†ì„±ì„ í†µí•´ì„œ í•¨ìˆ˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì´ˆê¸° ê°’ì´ ì ìš©ë˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.

```vue
<template>
  <div @click="increase">
    {{ count }}
  </div>
</template>

<script>
import { ref } from 'vue' // ref ë¼ëŠ” pacage ê°€ì ¸ì™€ì„œ ë°˜ì‘ì„± ì ìš©

export default {
  setup () { // Composition API ì‘ì„±
    let count = ref(0)  // ë°ì´í„°ê°’ì— ë‹¨ìˆœì´ 0ì´ ì•„ë‹Œ ref ë¼ëŠ” í•¨ìˆ˜ì— 0ì„ í• ë‹¹í•¨ -> ë°˜ì‘ì„±ì„ ê°€ì§€ëŠ” ê°ì²´ data ê°€ return ë¨
    function increase() { 
      count.value += 1 // count.value ë¼ëŠ” ì†ì„±ì„ í†µí•´ ref(0) ì•ˆì˜ 0ì„ ì¶œë ¥í•˜ê²Œ ë¨
    }

    return {
      count,
      increase
    }
  }
}
</script>
```

## 3.ê¸°ë³¸ ì˜µì…˜ê³¼ ë¼ì´í”„ì‚¬ì´í´


- ì¼ë°˜ì ì¸ vue  ì½”ë“œ

```vue
<template>
  <h1 @click="increase">
    {{ count }}  / {{ doubleCount }}
  </h1>
  <h1 @click="changeMessage">
    {{ message }} / {{ reversedMessage }}
  </h1>
</template>


<script>
export default {
  data() {
    return {
      count: 0,
      message: 'Hello world!'
    }
  },
  computed: {
    doubleCount() {
      return this.count * 2
    },
    reversedMessage() {
      return this.message.split('').reverse().join('')
    }
  },
  watch: {
    message(newVlaue) {
      console.log(newVlaue)
    }
  },
  created() { //component ê°€ ìƒì„±ëœ ì§í›„ì— ì‹¤í–‰ë˜ëŠ” life cycle
    console.log(this.message)
  },
  mounted() { //  HTML ì´ ì‹¤ì œ ì—°ê²°ëœ ì§í›„ì— ì‹¤í–‰ë˜ëŠ” life cycle
    console.log(this.count)
  },
  methods: {
    increase() {
      this.count += 1
    },
    changeMessage() {
      this.message = 'Good?!'
    }
  }
}
</script>
```

- ê°™ì€ ë‚´ìš©ì´ì§€ë§Œ, Composition APIë¥¼ ì‚¬ìš©í•´ì„œ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ

```vue
<template>
  <h1 @click="increase">
    {{ count }}  / {{ doubleCount }}
  </h1>
  <h1 @click="changeMessage">
    {{ message }} // {{ reversedMessage }}
  </h1>
</template>


<script>
import { ref, computed, watch, onMounted } from 'vue' // mounted  lifecycle ì„ ê°€ì ¸ì˜¤ëŠ”ê±°ëŠ” onMounted
// counted()  ê°€ì ¸ì˜¤ëŠ”ê²ƒì€ ì—†ê¸° ë•Œë¬¸ì—, setup() logic  ì´ ëë‚˜ê³  ì‹¤í–‰í•˜ê¸° ë•Œë¬¸ì— ë”°ë¡œ ê°€ì ¸ì˜¬ê±°ëŠ” ì—†ìŒ -> ë‚´ë¶€ ì–´ë””ì—ì„œë“ ì§€ ì‹¤í–‰í•˜ë©´ ë¨
export default {
  setup() { // ë°˜ì‘ì„±ì„ ê°€ì§€ëŠ” ref ì—ì„œ value ê°’ì„ í• ë‹¹í•´ì„œ ì‚¬ìš©í•´ì•¼ í•¨
    const count = ref(0)
    const dubleCount = computed(() => {
      return count.value * 2
    })
    function increase() {
      count.value += 1
    }


    const message = ref('Hello world')
    const reversedMessage = computed(() => {
      return message.value.split('').reversed().join('')
    })
    watch(message, newValue => { // ê°ì‹œí•˜ê³ ì í•˜ëŠ” ë°ì´í„°ë¥¼ ëª…ì‹œ
      console.log(newValue)
    }) 
    function changeMessage() {
      message.value = 'Good?!'
    }
    console.log(message.value) // created() ì„ ì‚¬ìš©í•˜ëŠ”ê²ƒê³¼ ê°™ìŒ

    onMounted(() => {
      console.log(count.value)
    })

    return {
      count,
      increase,
      dubleCount,
      message,
      reversedMessage,
      changeMessage

    }
  }
}
</script>
```

### Life cycle hook


> [lifeCycle hook ìì„¸íˆ ë³´ê¸°..](https://v3.vuejs.org/guide/composition-api-lifecycle-hooks.html){:target="\_blank"}

- ë¼ì´í”„ ì‚¬ì´í´ í›…ì— ì ‘ë‘ì‚¬ "on" ì„ ì¶”ê°€í•¨ìœ¼ë¡œì¨ ì»´í¬ë„ŒíŠ¸ì˜ ë¼ì´í”„ì‚¬ì´í´ í›…ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/28912774/119775880-2dd7fe00-beff-11eb-921e-02ff07ffdde4.png)


- ğŸ“Œ ìœ„ì— í‘œì— ë‚˜ì™€ ìˆë“¯ì´ beforeCreate, created  ëŠ” setup ë‚´ë¶€ì˜ í›…ì´ í•„ìš”í•˜ì§€ ì•Šê³  ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/28912774/119776057-6c6db880-beff-11eb-8d88-32658a899acd.png)


- ê²°ë¡ , Composition API ëŠ” ì¡°ê¸ˆë” logic ì´ ë³µì¡í•˜ê³ , ë§ì€ ë‚´ìš©ì´ ì„ì—¬ì ¸ ìˆëŠ”  Component ë‚´ë¶€ì—ì„œ ê¸°ì¡´ì˜ ë‚´ìš©ì„ ì§ê´€ì ìœ¼ë¡œ ë§Œë“¤ì–´ ì¤„ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•„ìš”ì˜ ë”°ë¼ì„œ ì½”ë“œë¥¼ ìµœì í™”í•´ì„œ ì‘ì„± í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 


## 4.Props, Context

- ê¸°ì¡´ì˜ props, context ë¥¼ Composition API í˜•íƒœë¡œë„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```vue
// in App.vue

<template>
  <MyBtn
    class="jacob"
    style="color: red;"
    color="#ff0000"
    @hello="log">
    Apple
  </MyBtn>
</template>

<script>
import MyBtn from '~/components/MyBtn'

export default {
  components: {
    MyBtn
  },
  methods: {
    log() {
      console.log('Hello world')
    }
  }
}
</script>
```

```vue
// in MyBtn.vue 

<template>
  <div
    v-bind="$attrs"
    class="btn"
    @click="hello">
    <slot></slot>
  </div>
</template>

<script>
import { onMounted } from 'vue'

export default {
  inheritAttrs: false,
  props: {
    color: {
      type: String,
      default: 'gray'
    }
  },
  emits: ['hello'],
  setup(props, context){
    function hello(){
      context.emit('hello')
    }
    onMounted(() => {
      console.log(props.color) // ìœ„ì˜ this.color ì™€ ê°™ì€ ê°’ì„
      console.log(context.attrs) // ìœ„ì˜  this.$attrs ì™€ ê°™ì€ ì°¸ì¡°ì¸ë° ì£¼ì˜ í•  ì ì€ attrs ì˜ $ í‘œì‹œë¥¼ ìƒìš©í•˜ì§€ ì•Šê³  ê·¸ëƒ¥ ì‚¬ìš©í•˜ê¸°
    })

    return {
      hello
    }
  }
}
</script>
```


ğŸ”¶ ğŸ”·  ğŸ“Œ ğŸ”‘

## Reference

- Vue.js guide v3.0 - [https://v3.vuejs.org/guide/introduction.html](https://v3.vuejs.org/guide/introduction.html){:target="\_blank"}



